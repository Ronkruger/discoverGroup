import{a,u as C,p as k,j as e,L as f}from"./index-7zN7D-LI.js";const P="http://localhost:4000";function q(){const[s,g]=a.useState({email:"",password:"",confirmPassword:"",fullName:"",phone:"",birthDate:"",gender:""}),[c,o]=a.useState(""),[i,m]=a.useState(""),[u,h]=a.useState(!1),[x,j]=a.useState(!1),[p,y]=a.useState(!1),[N,v]=a.useState(!1),d=C(),{setUser:w,user:b}=k();a.useEffect(()=>{b&&d("/")},[b,d]);function n(t){g(r=>({...r,[t.target.name]:t.target.value}))}async function S(t){if(t.preventDefault(),o(""),m(""),s.password!==s.confirmPassword){o("Passwords do not match");return}h(!0);try{const r=await fetch(`${P}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.email,password:s.password,fullName:s.fullName,phone:s.phone,birthDate:s.birthDate,gender:s.gender})}),l=await r.json();if(!r.ok)throw new Error(l.error||"Registration failed");l.requiresVerification?(m(l.message||"Registration successful! Please check your email to verify your account."),v(!0)):(localStorage.setItem("token",l.token),localStorage.setItem("user",JSON.stringify(l.user)),w(l.user),d("/"))}catch(r){r instanceof Error?o(r.message):o(String(r))}finally{h(!1)}}return e.jsxs("div",{className:"max-w-md mx-auto mt-12 p-6 bg-white rounded shadow",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Client Registration"}),N?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mb-6 text-green-600 text-6xl",children:"âœ‰ï¸"}),e.jsx("h3",{className:"text-xl font-bold mb-4 text-green-600",children:"Registration Successful!"}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-gray-700 mb-2",children:i}),e.jsxs("p",{className:"text-sm text-gray-600",children:["We've sent a verification email to ",e.jsx("strong",{children:s.email})]})]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsx("p",{children:"ğŸ“§ Check your inbox (and spam folder)"}),e.jsx("p",{children:"ğŸ”— Click the verification link in the email"}),e.jsx("p",{children:"âœ… Then you can login to your account"})]}),e.jsx("div",{className:"mt-6",children:e.jsx(f,{to:"/login",className:"inline-block bg-blue-600 text-white px-6 py-2 rounded font-semibold hover:bg-blue-700",children:"Go to Login"})})]}):e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 text-red-600 rounded",children:c}),i&&e.jsx("div",{className:"mb-3 p-3 bg-green-50 border border-green-200 text-green-600 rounded",children:i}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Full Name"}),e.jsx("input",{type:"text",name:"fullName",className:"w-full border rounded px-3 py-2",value:s.fullName,onChange:n,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Email"}),e.jsx("input",{type:"email",name:"email",className:"w-full border rounded px-3 py-2",value:s.email,onChange:n,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",className:"w-full border rounded px-3 py-2",value:s.phone,onChange:n,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Birth Date"}),e.jsx("input",{type:"date",name:"birthDate",className:"w-full border rounded px-3 py-2",value:s.birthDate,onChange:n,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Gender"}),e.jsxs("select",{name:"gender",className:"w-full border rounded px-3 py-2",value:s.gender,onChange:n,required:!0,children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"}),e.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x?"text":"password",name:"password",className:"w-full border rounded px-3 py-2 pr-10",value:s.password,onChange:n,required:!0}),e.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500",tabIndex:-1,onClick:()=>j(t=>!t),children:x?"ğŸ™ˆ":"ğŸ‘ï¸"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:p?"text":"password",name:"confirmPassword",className:"w-full border rounded px-3 py-2 pr-10",value:s.confirmPassword,onChange:n,required:!0}),e.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500",tabIndex:-1,onClick:()=>y(t=>!t),children:p?"ğŸ™ˆ":"ğŸ‘ï¸"})]})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded font-semibold",disabled:u,children:u?"Registering...":"Register"})]}),e.jsxs("div",{className:"mt-4 text-sm text-center",children:["Already have an account?"," ",e.jsx(f,{to:"/login",className:"text-blue-600 hover:underline",children:"Login"})]})]})]})}export{q as default};
