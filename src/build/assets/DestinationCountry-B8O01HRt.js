import{i as G,l as Y,a as i,j as e,L as k,n as _}from"./index-COMo_l_O.js";const M={France:{blurb:"From the boulevards of Paris to the lavender fields of Provence and the sun-kissed Riviera, France offers rich history, world-class cuisine, and unforgettable landscapes.",heroQuery:"france,paris",attractions:[{title:"Eiffel Tower",blurb:"Iconic Paris landmark with panoramic city views.",image:"https://source.unsplash.com/800x450/?eiffel-tower"},{title:"Louvre Museum",blurb:"Home of the Mona Lisa and world-class collections.",image:"https://source.unsplash.com/800x450/?louvre"},{title:"Provence Lavender",blurb:"Seasonal lavender fields and scenic villages.",image:"https://source.unsplash.com/800x450/?provence,lavender"}],practical:{bestTime:"Apr – Jun, Sep – Oct",currency:"EUR (€)",language:"French",visa:"Schengen visa may be required depending on nationality"},testimonials:[{quote:"Fantastic itinerary — food, culture and guides were superb.",author:"A. Santos"},{quote:"Perfect pace and excellent local hotels.",author:"M. Cruz"}]},Italy:{blurb:"Italy blends ancient history, Renaissance art and beautiful coastal scenery — explore Rome, Florence and the gems of Tuscany and the Amalfi coast.",heroQuery:"italy,rome",attractions:[{title:"Colosseum",blurb:"Ancient amphitheatre in the heart of Rome.",image:"https://source.unsplash.com/800x450/?colosseum"},{title:"Uffizi Gallery",blurb:"Renaissance art collection in Florence.",image:"https://source.unsplash.com/800x450/?uffizi"}],practical:{bestTime:"Apr – Jun, Sep – Oct",currency:"EUR (€)",language:"Italian",visa:"Schengen visa may be required depending on nationality"},testimonials:[{quote:"Incredible food and expertly guided tours.",author:"J. Reyes"}]},Switzerland:{blurb:"Alpine scenery, lakes and scenic train rides — a paradise for nature lovers and photographers.",heroQuery:"switzerland,lucerne",attractions:[{title:"Lake Lucerne",blurb:"Picturesque lake surrounded by mountains.",image:"https://source.unsplash.com/800x450/?lucerne"},{title:"Swiss Alps",blurb:"World-class alpine scenery and mountain excursions.",image:"https://source.unsplash.com/800x450/?alps"}],practical:{bestTime:"Jun – Sep",currency:"CHF (Swiss Franc)",language:"German/French/Italian",visa:"Schengen"}},"Vatican City":{blurb:"A spiritual microstate at the heart of Rome — small but packed with history and art.",heroQuery:"vatican,st-peters",attractions:[{title:"St Peter's Basilica",blurb:"Masterpiece of Renaissance architecture."}],practical:{bestTime:"Apr – Oct",currency:"EUR (€)",language:"Italian",visa:"Schengen"}},default:{blurb:"Explore this destination — browse tours, highlights and travel essentials below.",heroQuery:void 0,attractions:[],practical:{bestTime:"Year-round",currency:"Local currency",language:"Local language",visa:"Check local embassy"}}},Z={Paris:{lat:48.8566,lng:2.3522},Lucerne:{lat:47.0502,lng:8.3093},Florence:{lat:43.7696,lng:11.2558},Rome:{lat:41.9028,lng:12.4964},Zurich:{lat:47.3769,lng:8.5417},Milan:{lat:45.4642,lng:9.19},Venice:{lat:45.4408,lng:12.3155},Prague:{lat:50.0755,lng:14.4378},Warsaw:{lat:52.2297,lng:21.0122},Manila:{lat:14.5995,lng:120.9842}};function B(x,I=6,p=1200,c=600){const l=encodeURIComponent(x),g=[];for(let m=1;m<=I;m+=1)g.push(`https://source.unsplash.com/${p}x${c}/?${l}&sig=${m}`);return g}function T(x){return`PHP ${x.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function X(){const{country:x}=G(),p=Y().state??{},c=x?decodeURIComponent(x):p?.country??"Destination",[l,g]=i.useState(()=>p?.tours&&p.tours.length?p.tours:null),[m,R]=i.useState(l===null),[w,C]=i.useState(1),[h,z]=i.useState(()=>B(c,6)),[v,j]=i.useState(0),f=i.useRef(null),b=i.useRef(null),N=i.useRef(null);i.useEffect(()=>{z(B(c,6)),j(0)},[c]),i.useEffect(()=>{let t=!1;async function s(){if(!(l&&l.length)){R(!0);try{const a=await _(c);t||g(a)}catch(a){console.error("fetchToursByCountry error",a),t||g([])}finally{t||R(!1)}}}return s(),()=>{t=!0}},[c,l]);function D(){j(t=>(t-1+h.length)%h.length)}function U(){j(t=>(t+1)%h.length)}function $(t){j(t%h.length)}i.useEffect(()=>{async function t(){if(!f.current)return;const s=window.L;if(s&&!b.current){const r=s.map(f.current,{center:[20,0],zoom:2});s.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(r),b.current=r;return}if(!document.querySelector('link[data-leaflet="true"]')){const r=document.createElement("link");r.rel="stylesheet",r.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",r.setAttribute("data-leaflet","true"),document.head.appendChild(r)}document.querySelector('script[data-leaflet="true"]')||await new Promise((r,u)=>{const o=document.createElement("script");o.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",o.async=!0,o.setAttribute("data-leaflet","true"),o.onload=()=>r(),o.onerror=()=>u(new Error("Failed to load Leaflet")),document.body.appendChild(o)});const a=window.L;if(a&&!b.current&&f.current){const r=a.map(f.current,{center:[20,0],zoom:2});a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(r),b.current=r}}t().catch(s=>{console.warn("Leaflet init failed",s)})},[]),i.useEffect(()=>{const t=b.current;if(!t||!l)return;const s=window.L;if(!s)return;if(N.current&&typeof t.removeLayer=="function"){try{t.removeLayer(N.current)}catch{}N.current=null}const a=s.layerGroup(),r=new Map;for(const o of l)for(const d of o.fullStops??[])if(typeof d.city=="string"&&typeof d.country=="string"){const y=`${d.city}|${d.country}`;r.has(y)||r.set(y,{city:d.city,country:d.country})}const u=[];r.forEach(o=>{const d=Z[o.city];if(d){const y=s.marker([d.lat,d.lng]);y.bindPopup(`<strong>${o.city}</strong><div class="text-xs">${o.country}</div>`),y.addTo(a),u.push([d.lat,d.lng])}}),u.length>0?(a.addTo(t),typeof t.fitBounds=="function"&&t.fitBounds(u,{padding:[40,40]}),N.current=a):typeof t.setView=="function"&&t.setView([20,0],2)},[l]);function O(t){const s=t,a=typeof s.regularPricePerPerson=="number"?s.regularPricePerPerson:void 0,r=typeof s.promoPricePerPerson=="number"?s.promoPricePerPerson:void 0;if(a!==void 0||r!==void 0)return{regular:a,promo:r,effective:a??r??0};const u=t.durationDays??t.itinerary?.length??0,o=Math.round((s.basePricePerDay??0)*u);return{regular:o,promo:void 0,effective:o}}const n=M[c]??M.default,A=(()=>{if(!l||l.length===0)return[];const t=new Set;for(const s of l)(s.highlights??[]).forEach(a=>t.add(a));return Array.from(t).slice(0,6)})(),H=n.attractions&&n.attractions.length>0?n.attractions:A.slice(0,3).map(t=>({title:t,blurb:"",image:void 0})),V=(()=>{if(!l)return[];const t=new Map;for(const s of l)for(const a of s.fullStops??[])if(typeof a.city=="string"&&typeof a.country=="string"){const r=`${a.city}|${a.country}`;t.has(r)||t.set(r,{city:a.city,country:a.country})}return Array.from(t.values())})(),[E,P]=i.useState(""),[q,S]=i.useState(""),[F,L]=i.useState(""),[Q,J]=i.useState(!1);function W(t){t&&t.preventDefault(),console.info("Contact enquiry",{country:c,contactName:E,contactEmail:q,contactMessage:F}),J(!0),P(""),S(""),L("")}return e.jsxs("main",{className:"container mx-auto px-5 py-10",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("div",{className:"rounded-lg overflow-hidden bg-slate-50 shadow-sm",children:e.jsxs("div",{className:"md:flex",children:[e.jsxs("div",{className:"md:w-3/5 relative bg-gray-200",children:[e.jsxs("div",{className:"h-56 md:h-64 overflow-hidden relative",children:[e.jsx("img",{src:h[v],alt:`${c} image ${v+1}`,className:"w-full h-full object-cover transition-opacity duration-300",loading:"lazy"}),e.jsx("button",{onClick:D,"aria-label":"Previous image",className:"absolute left-3 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white text-slate-800 rounded-full w-9 h-9 grid place-items-center",children:"‹"}),e.jsx("button",{onClick:U,"aria-label":"Next image",className:"absolute right-3 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white text-slate-800 rounded-full w-9 h-9 grid place-items-center",children:"›"}),e.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2",children:h.map((t,s)=>e.jsx("button",{onClick:()=>$(s),"aria-label":`Show image ${s+1}`,className:`w-2 h-2 rounded-full ${s===v?"bg-white":"bg-white/60"}`},s))})]}),e.jsx("div",{className:"hidden md:flex gap-2 p-3 bg-white border-t",children:h.map((t,s)=>e.jsx("button",{onClick:()=>$(s),className:`w-20 h-12 overflow-hidden rounded-sm border ${s===v?"ring-2 ring-rose-500":"border-slate-200"}`,children:e.jsx("img",{src:t,alt:`thumb ${s+1}`,className:"w-full h-full object-cover",loading:"lazy"})},s))})]}),e.jsxs("div",{className:"md:w-2/5 p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:c}),e.jsx("p",{className:"text-slate-600 mb-4",children:n.blurb}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs(k,{to:`/search?countries=${encodeURIComponent(c)}&brands=Trafalgar&useEmbeddedCards=true`,className:"inline-block bg-rose-600 text-white px-4 py-2 rounded-md shadow-sm hover:bg-rose-700",children:["See all ",c," tours"]}),e.jsx("div",{className:"text-sm text-slate-500",children:"Passengers"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>C(t=>Math.max(1,t-1)),className:"w-8 h-8 rounded-full border flex items-center justify-center",children:"−"}),e.jsx("input",{"aria-label":"Passengers",className:"w-16 text-center rounded-md border px-2 py-1 text-sm",value:w,onChange:t=>{const s=parseInt(t.target.value,10);!Number.isNaN(s)&&s>=1&&C(s)},inputMode:"numeric",pattern:"[0-9]*"}),e.jsx("button",{type:"button",onClick:()=>C(t=>t+1),className:"w-8 h-8 rounded-full border flex items-center justify-center",children:"+"})]})]}),e.jsx("div",{className:"text-sm text-slate-500 mb-4",children:m?"Checking available tours…":`${l?.length??0} tour${(l?.length??0)!==1?"s":""} available`}),e.jsxs("div",{className:"bg-white border rounded p-3",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Practical info"}),e.jsxs("div",{className:"text-sm mt-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Best time:"})," ",n.practical?.bestTime??"—"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Currency:"})," ",n.practical?.currency??"—"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Language:"})," ",n.practical?.language??"—"]}),n.practical?.visa&&e.jsxs("div",{children:[e.jsx("strong",{children:"Visa:"})," ",n.practical?.visa]})]})]}),n.testimonials&&n.testimonials.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"What travellers say"}),e.jsx("div",{className:"mt-2 space-y-2",children:n.testimonials.map((t,s)=>e.jsxs("blockquote",{className:"text-sm text-slate-700 italic",children:["“",t.quote,"” ",e.jsxs("span",{className:"not-italic text-xs text-slate-500",children:["— ",t.author]})]},s))})]})]})]})}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:A.map(t=>e.jsx("span",{className:"text-xs px-3 py-1 rounded-full bg-blue-50 text-blue-700",children:t},t))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white border rounded p-4 mb-4",children:[e.jsx("div",{className:"text-sm text-slate-500 mb-3",children:"Stops map"}),e.jsx("div",{ref:f,style:{width:"100%",height:360},className:"rounded"}),e.jsx("div",{className:"text-xs text-slate-500 mt-2",children:"Markers show stops included on the listed tours (where coordinates exist)."}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:V.map(t=>e.jsxs("span",{className:"text-xs px-3 py-1 rounded-full bg-slate-100 text-slate-700",children:[t.city,", ",t.country]},`${t.city}-${t.country}`))})]}),e.jsxs("section",{children:[m&&e.jsx("div",{className:"text-slate-500",children:"Loading tours…"}),!m&&(!l||l.length===0)&&e.jsxs("div",{className:"p-6 bg-white border rounded text-slate-600",children:["No tours found for ",c,"."]}),!m&&l&&l.length>0&&e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:l.map(t=>{const s=O(t),a=s.regular??s.effective,r=s.promo,u=a*Math.max(1,w);return e.jsxs("article",{className:"bg-white border rounded-lg overflow-hidden shadow-sm",children:[e.jsx("div",{className:"h-40 bg-gray-100",children:e.jsx("img",{src:t.images?.[0]??"/assets/placeholder.jpg",alt:t.title,className:"w-full h-40 object-cover"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:t.title}),e.jsx("p",{className:"text-sm text-slate-600 mt-2",children:t.summary}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-slate-500",children:[t.durationDays," Days"]}),e.jsxs("div",{className:"text-sm text-right",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Per head"}),e.jsx("div",{className:"text-base font-semibold text-slate-900",children:T(a)}),r!==void 0&&s.regular!==void 0&&e.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Promo: ",e.jsx("span",{className:"text-rose-600",children:T(r)})]}),r!==void 0&&s.regular===void 0&&e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Promo applied"}),e.jsxs("div",{className:"text-xs text-slate-500 mt-2",children:["Total (",w," pax)"]}),e.jsx("div",{className:"text-base font-semibold text-slate-900",children:T(u)})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx(k,{to:`/tour/builder/${t.slug}`,className:"text-xs px-3 py-2 bg-slate-100 rounded hover:bg-slate-200",children:"Builder"}),e.jsx(k,{to:`/tour/${t.slug}`,className:"text-xs px-3 py-2 bg-rose-600 text-white rounded hover:bg-rose-700",children:"View details"})]})]})]},t.slug)})})]})]}),e.jsxs("aside",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border rounded p-4",children:[e.jsx("div",{className:"text-sm text-slate-500 mb-2",children:"Top attractions"}),e.jsx("div",{className:"space-y-3",children:H.map((t,s)=>e.jsxs("div",{className:"flex gap-3 items-start",children:[e.jsx("div",{className:"w-16 h-12 bg-gray-100 rounded overflow-hidden flex-shrink-0",children:e.jsx("img",{src:t.image??`https://source.unsplash.com/160x100/?${encodeURIComponent(t.title)}`,alt:t.title,className:"w-full h-full object-cover",loading:"lazy"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-800",children:t.title}),e.jsx("div",{className:"text-xs text-slate-600",children:t.blurb})]})]},s))})]}),e.jsxs("div",{className:"bg-white border rounded p-4",children:[e.jsx("div",{className:"text-sm text-slate-500 mb-2",children:"Contact local expert"}),Q?e.jsx("div",{className:"text-sm text-emerald-700",children:"Thanks — your enquiry was sent. We'll be in touch soon."}):e.jsxs("form",{onSubmit:W,className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Full name",value:E,onChange:t=>P(t.target.value),className:"w-full border rounded px-3 py-2 text-sm",required:!0}),e.jsx("input",{type:"email",placeholder:"Email",value:q,onChange:t=>S(t.target.value),className:"w-full border rounded px-3 py-2 text-sm",required:!0}),e.jsx("textarea",{placeholder:`Hi, I'm interested in tours to ${c}.`,value:F,onChange:t=>L(t.target.value),className:"w-full border rounded px-3 py-2 text-sm",rows:4}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-rose-600 text-white px-3 py-2 rounded",children:"Send enquiry"}),e.jsx("button",{type:"button",onClick:()=>{P(""),S(""),L("")},className:"px-3 py-2 border rounded",children:"Reset"})]})]})]}),e.jsxs("div",{className:"bg-white border rounded p-4",children:[e.jsx("div",{className:"text-sm text-slate-500 mb-2",children:"Practical info"}),e.jsxs("div",{className:"text-sm text-slate-700 space-y-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Best time:"})," ",n.practical.bestTime]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Currency:"})," ",n.practical.currency]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Language:"})," ",n.practical.language]}),n.practical.visa&&e.jsxs("div",{children:[e.jsx("strong",{children:"Visa:"})," ",n.practical.visa]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Local tip:"})," Carry a refillable water bottle and comfortable walking shoes for city explorations."]})]})]}),e.jsxs("div",{className:"bg-white border rounded p-4 text-center",children:[e.jsx("div",{className:"text-sm text-slate-500 mb-2",children:"Trusted by travellers"}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("img",{src:"https://via.placeholder.com/60x32?text=ATOL",alt:"ATOL"}),e.jsx("img",{src:"https://via.placeholder.com/60x32?text=IATA",alt:"IATA"}),e.jsx("img",{src:"https://via.placeholder.com/60x32?text=BBB",alt:"BBB"})]})]})]})]})]})}export{X as default};
