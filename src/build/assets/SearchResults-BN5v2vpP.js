import{o as L,a as x,j as e,L as N,f as T,n as C}from"./index-7zN7D-LI.js";function U(){const[D]=L(),d=D.get("countries")??"",[m,h]=x.useState([]),[f,y]=x.useState(!0),[b,g]=x.useState(1);x.useEffect(()=>{let t=!1;async function s(){y(!0);try{if(!d){const o=await T();t||h(o);return}const a=await C(d);t||h(a)}catch(a){console.error("fetchToursByCountry error",a),t||h([])}finally{t||y(!1)}}return s(),()=>{t=!0}},[d]);function P(t){const s=t,a=typeof s.regularPricePerPerson=="number"?s.regularPricePerPerson:void 0,o=typeof s.promoPricePerPerson=="number"?s.promoPricePerPerson:void 0;if(a!==void 0||o!==void 0)return{regular:a,promo:o,effective:a??o??0};const p=t.durationDays??t.itinerary?.length??0,v=Math.round((s.basePricePerDay??0)*p);return{regular:v,promo:void 0,effective:v}}function u(t){return`PHP ${t.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`}return e.jsx("main",{className:"min-h-[80vh] bg-gradient-to-br from-blue-50 via-white to-yellow-50/40 py-10",children:e.jsxs("div",{className:"container mx-auto px-5",children:[e.jsxs("header",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-extrabold text-blue-900 drop-shadow-sm",children:"Search results"}),e.jsxs("p",{className:"text-slate-600 text-base",children:["Showing tours for ",e.jsx("span",{className:"font-semibold text-blue-700",children:d||"all countries"}),"."]})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-white/80 rounded-xl shadow px-4 py-2 border border-slate-200",children:[e.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Passengers"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>g(t=>Math.max(1,t-1)),className:"w-9 h-9 rounded-full border border-slate-300 flex items-center justify-center text-lg font-bold bg-slate-100 hover:bg-blue-100 active:bg-blue-200 transition","aria-label":"Decrease passengers",children:"‚àí"}),e.jsx("input",{"aria-label":"Passengers",className:"w-14 text-center rounded-lg border border-slate-300 px-2 py-1 text-base font-semibold bg-white shadow-sm focus:ring-2 focus:ring-blue-300",value:b,onChange:t=>{const s=parseInt(t.target.value,10);!Number.isNaN(s)&&s>=1&&g(s)},inputMode:"numeric",pattern:"[0-9]*"}),e.jsx("button",{type:"button",onClick:()=>g(t=>t+1),className:"w-9 h-9 rounded-full border border-slate-300 flex items-center justify-center text-lg font-bold bg-slate-100 hover:bg-blue-100 active:bg-blue-200 transition","aria-label":"Increase passengers",children:"+"})]})]})]}),f&&e.jsx("div",{className:"text-slate-500",children:"Loading results‚Ä¶"}),!f&&m.length===0&&e.jsx("div",{className:"p-8 border rounded-2xl bg-white/80 text-slate-600 shadow-md text-center text-lg font-medium",children:"No tours found."}),!f&&m.length>0&&e.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:m.map(t=>{const s=P(t),a=s.regular??s.effective,o=s.promo,p=a*Math.max(1,b);return e.jsxs("article",{className:"bg-white/90 border border-slate-200 rounded-3xl overflow-hidden shadow-xl hover:shadow-2xl transition-shadow duration-200 flex flex-col",children:[e.jsxs("div",{className:"relative h-48 bg-gray-100",children:[e.jsx("img",{src:t.images?.[0]??"/assets/placeholder.jpg",alt:t.title,className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-blue-900/40 to-transparent"}),e.jsxs("div",{className:"absolute top-4 left-4 bg-yellow-400 text-blue-900 text-xs font-bold px-3 py-1 rounded-full shadow",children:[t.durationDays," Days"]})]}),e.jsxs("div",{className:"p-5 flex flex-col flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-1 drop-shadow-sm",children:t.title}),e.jsx("p",{className:"text-sm text-slate-600 mb-3 line-clamp-2",children:t.summary}),(()=>{const i=(Array.isArray(t.departureDates)?t.departureDates:[]).map(r=>typeof r=="string"?{startDate:r}:r),w=t.travelWindow;if(i.length>0){const r=new Date,c=i.filter(n=>new Date(n.startDate)>r).sort((n,l)=>new Date(n.startDate).getTime()-new Date(l.startDate).getTime());if(c.length>0){const n=c[0],l=new Date(n.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric"}),j=n.endDate??n.startDate,S=new Date(j).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return e.jsxs("div",{className:"text-xs text-slate-500 mb-2 flex items-center gap-1",children:["üìÖ Next: ",l," - ",S,i.length>1&&e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full ml-1",children:["+",i.length-1," more"]})]})}}else if(w){const r=w,c=r.startDate??r.start??r.startAt??r.from,n=r.endDate??r.end??r.endAt??r.to;if(c&&n){const l=new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric"}),j=new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return e.jsxs("div",{className:"text-xs text-slate-500 mb-2",children:["üìÖ ",l," - ",j]})}}return null})(),e.jsxs("div",{className:"mt-auto flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Per head"}),e.jsx("div",{className:"text-base font-bold text-blue-900",children:u(a)})]}),o!==void 0&&s.regular!==void 0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Promo"}),e.jsx("div",{className:"text-xs font-semibold text-rose-600 line-through",children:u(s.regular)}),e.jsx("div",{className:"text-sm font-bold text-rose-600",children:u(o)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"text-xs text-slate-500",children:["Total (",b," pax)"]}),e.jsx("div",{className:"text-base font-bold text-blue-900",children:u(p)})]})]}),e.jsxs("div",{className:"mt-5 flex gap-3",children:[e.jsxs(N,{to:`/tour/builder/${t.slug}`,className:"flex-1 flex items-center justify-center gap-2 text-xs px-4 py-2 bg-blue-50 text-blue-800 font-semibold rounded-full shadow hover:bg-blue-100 hover:scale-105 transition-all duration-150",children:[e.jsx("span",{children:"üõ†Ô∏è"})," Builder"]}),e.jsxs(N,{to:`/tour/${t.slug}`,className:"flex-1 flex items-center justify-center gap-2 text-xs px-4 py-2 bg-gradient-to-r from-rose-500 to-rose-600 text-white font-semibold rounded-full shadow hover:from-rose-400 hover:to-rose-500 hover:scale-105 transition-all duration-150",children:[e.jsx("span",{children:"üîé"})," View"]})]})]})]},t.slug)})})]})})}export{U as default};
