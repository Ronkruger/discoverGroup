import{i as nt,u as rt,a as m,f as at,k as lt,j as t,L as we}from"./index-7zN7D-LI.js";function ot(y){return y?y.startsWith("http://")||y.startsWith("https://")||y.startsWith("/"):!1}function ct(){const{slug:y}=nt(),De=rt(),[c,L]=m.useState(void 0),[O,Re]=m.useState([]),[R,Pe]=m.useState(null),[p,C]=m.useState(null),[b,k]=m.useState(null),[S,J]=m.useState(1),[B,ne]=m.useState(!1),[I,F]=m.useState(1),[M,U]=m.useState(null),[u,$]=m.useState(null),[re,K]=m.useState(null),Ce=m.useRef(null),q=m.useRef(null),Te=m.useRef(null),_=m.useRef({}),[ke,ae]=m.useState([]),[Ie,le]=m.useState([]),oe={RED:"bg-red-500",BLUE:"bg-blue-500",GREEN:"bg-green-500",YELLOW:"bg-yellow-500",BROWN:"bg-yellow-900",ROUTE_A:"bg-rose-600",DEFAULT:"bg-gray-400"},v={RED:"#ef4444",BLUE:"#3b82f6",GREEN:"#10b981",YELLOW:"#f59e0b",BROWN:"#b45309",ROUTE_A:"#94a3b8",DEFAULT:"#94a3b8"};m.useEffect(()=>{at().then(Re).catch(e=>console.error("fetchTours error:",e))},[]),m.useEffect(()=>{if(!y){L(null);return}L(void 0),lt(y).then(e=>{L(e),Pe(e?.travelWindow?.start??null),C(null),k(null),U(null),$(null),J(1),ne(!1),F(1),K(null),setTimeout(()=>window.scrollTo({top:0,behavior:"smooth"}),60)}).catch(e=>{console.error("fetchTourBySlug error:",e),L(null)})},[y]);function Ae(e){if(!e)return[];const s=e.itinerary?.length??e.durationDays??0,n=Array(s).fill(void 0),r=e.fullStops??[];let l=0;for(const o of r){const a=typeof o.days=="number"&&o.days>0?o.days:1;for(let i=0;i<a&&l<s;i+=1,l+=1)n[l]=o}if(l<s){const o=n[Math.max(0,l-1)]??r[r.length-1];for(let a=l;a<s;a+=1)n[a]=o}const x=r[0];if(x)for(let o=0;o<s;o+=1)n[o]||(n[o]=x);return n}function ie(e,s=0){if(!e)return[];const n=e.itinerary?.length??e.durationDays??0,r=e.fullStops??[],l=[];let x=0;for(const o of r){const a=typeof o.days=="number"&&o.days>0?o.days:1,i=s+x,G=Math.min(s+x+a-1,s+n-1);l.push({stop:o,start:i,end:G}),x+=a}return x<n&&l.length>0&&(l[l.length-1].end=s+n-1),l.length===0&&r.length>0&&l.push({stop:r[0],start:s,end:s+Math.max(0,n-1)}),l}const Ee=Ae(c),N=c?.itinerary??[],f=ie(c,0),Q=u?ie(u.tour,u.insertAfterIndex+1):[];function Le(){if(!u||!c)return{mergedRanges:f.slice(),mergedLength:N.length};const e=u.tour.itinerary?.length??u.tour.durationDays??0,s=u.insertAfterIndex,n=[],r=[];for(let o=0;o<f.length;o+=1){const a=f[o],i=o===f.length-1;if(a.end<s){n.push({...a});continue}if(a.start>s){r.push({stop:a.stop,start:a.start+e,end:a.end+e});continue}if(i&&a.start<=s){r.push({stop:a.stop,start:a.start+e,end:a.end+e});continue}if(a.start<=s&&a.end>=s){n.push({stop:a.stop,start:a.start,end:s});const G=s+1+e,pe=a.end+e;r.push({stop:a.stop,start:G,end:pe})}}const l=[...n,...Q,...r],x=N.length+e;return{mergedRanges:l,mergedLength:x}}const{mergedRanges:w,mergedLength:A}=Le();function Se(){const e=A??N.length,s=Array(e).fill(void 0);if(w&&w.length)for(const r of w)for(let l=r.start;l<=r.end&&l<e;l+=1)s[l]=r.stop;const n=s.find(r=>!!r);for(let r=0;r<e;r+=1)s[r]||(s[r]=r>0?s[r-1]??n:n);return s}const ce=Se();function Be(){const e=A??N.length,s=Array.from({length:e},()=>[]);if(!w||w.length===0)return s;for(let n=0;n<e;n+=1)for(const r of w)if(r.start<=n&&n<=r.end){const l=r.stop?.city;if(!l)continue;const o=(u?Q.some(i=>i.stop===r.stop&&i.start===r.start&&i.end===r.end):!1)?"insert":"base",a=o==="insert"?v[u.tour.line??"DEFAULT"]??v.DEFAULT:v[c.line??"DEFAULT"]??v.DEFAULT;s[n].some(i=>i.city===l&&i.source===o)||s[n].push({city:l,colorHex:a,source:o})}return s}const de=Be(),D=A??N.length,P=ce.length?ce:Ee,Fe=de.length?de:(()=>{const e=N.length,s=Array.from({length:e},()=>[]);if(c){const n=v[c.line??"DEFAULT"]??v.DEFAULT;for(let r=0;r<e;r+=1)for(const l of f)if(l.start<=r&&r<=l.end){const x=l.stop?.city;x&&!s[r].some(o=>o.city===x&&o.source==="base")&&s[r].push({city:x,colorHex:n,source:"base"})}}return s})();m.useEffect(()=>{if(!q.current)return;const e=q.current.getBoundingClientRect(),s=Array(D).fill(null);for(const d of w){const j=(u?Q.some(g=>g.stop===d.stop&&g.start===d.start&&g.end===d.end):!1)?v[u.tour.line??"DEFAULT"]??v.DEFAULT:v[c.line??"DEFAULT"]??v.DEFAULT;for(let g=d.start;g<=d.end&&g<D;g+=1)s[g]=j}const n=[];let r=0;for(;r<D;){const d=s[r];if(!d){r+=1;continue}let h=r;for(;h+1<D&&s[h+1]===d;)h+=1;n.push({start:r,end:h,color:d}),r=h+1}const l=Te.current?.getBoundingClientRect(),o=(l?l.left+l.width/2:e.left+28)-e.left,a=12,i=Math.max(o-a/2,6),et=Math.max(e.width-44,o+80)-a/2,V=[];for(let d=0;d<n.length;d+=1){const h=n[d],j=_.current[h.start],g=_.current[h.end];if(!j||!g)continue;const te=j.getBoundingClientRect(),z=g.getBoundingClientRect(),E=Math.round(te.top-e.top),X=Math.round(z.bottom-e.top),Y=Math.max(12,X-E),se=(d%2===0?"right":"left")==="right"?et:i;V.push({top:E,height:Y,color:h.color,x:se})}ae(V);const be=[];for(let d=0;d<n.length-1;d+=1){const h=n[d],j=n[d+1];if(h.end+1!==j.start||h.color===j.color)continue;const g=d%2===0?"right":"left",te=(d+1)%2===0?"right":"left";if(g===te)continue;const z=V[d],E=V[d+1];if(!z||!E)continue;const X=z.x+a/2,Y=E.x+a/2,ve=Math.min(X,Y),se=Math.max(8,Math.abs(Y-X)),je=_.current[j.start];if(!je)continue;const Ne=je.getBoundingClientRect(),tt=Math.round(Ne.top-e.top+Ne.height/2-3),st=`linear-gradient(90deg, ${h.color}33 0%, ${j.color}33 100%)`;be.push({left:ve,top:tt,width:se,gradient:st})}le(be);const ye=()=>{setTimeout(()=>{ae(d=>[...d]),le(d=>[...d])},60)};return window.addEventListener("resize",ye),()=>window.removeEventListener("resize",ye)},[w,u,D,c]);function ue(e){if(!e)return"â€”";const s=typeof e=="string"?new Date(e):e;return Number.isNaN(s.getTime())?"â€”":s.toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"})}function Me(e){if(!e)return"â€”";const s=typeof e=="string"?new Date(e):e;return Number.isNaN(s.getTime())?"â€”":s.toLocaleDateString(void 0,{weekday:"short"}).toUpperCase()}function Ue(e){if(!e)return"â€”";const s=typeof e=="string"?new Date(e):e;return Number.isNaN(s.getTime())?"â€”":s.toLocaleDateString(void 0,{day:"numeric",month:"short"}).toUpperCase()}function $e(e){if(!R)return"";const n=new Date(R).getTime()+e*24*60*60*1e3;return new Date(n).toISOString()}function me(){return p!==null&&b!==null&&b>=p?b-p+1:u&&typeof A=="number"?A:c?.durationDays??N.length??0}function xe(e){if(!e)return 0;const s=e;if(typeof s.regularPricePerPerson=="number")return s.regularPricePerPerson;if(typeof s.promoPricePerPerson=="number")return s.promoPricePerPerson;if(typeof s.basePricePerDay=="number"){const n=e.durationDays??e.itinerary?.length??0;return s.basePricePerDay*n}return 0}function Z(){const e=xe(c),s=u?xe(u.tour):0,n=e+s;return{base:e,insert:s,totalPerPerson:n}}function _e(){return Z().totalPerPerson*Math.max(1,S??1)}function T(e,s=!1){return s?`PHP ${Math.round(e).toLocaleString("en-PH")}`:`PHP ${e.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function He(){const e=_e();return B&&I>0?`${T(e)} + ${I} infant(s) (TBD)`:T(e)}function We(){const{base:e,insert:s,totalPerPerson:n}=Z();return u?{lines:[{label:"Base per head",value:T(e)},{label:"Inserted per head",value:T(s)}],totalLabel:"Per head (total)",totalValue:T(n)}:{lines:[{label:"Per head",value:T(e)}],totalLabel:void 0,totalValue:void 0}}function Ge(){if(!R)return null;const e=new Date(R),s=me(),n=e.getTime()+(s-1)*24*60*60*1e3;return new Date(n).toISOString()}function fe(e){J(s=>Math.max(1,s+e))}function Ve(e){const s=parseInt(e.target.value,10);Number.isNaN(s)||s<1||J(s)}function he(e){F(s=>Math.max(1,s+e))}function ze(e){const s=parseInt(e.target.value,10);Number.isNaN(s)||s<1||F(s)}function Xe(e){if(p===null&&b===null){C(e),k(e);return}if(p!==null&&b===null){e<p?C(e):k(e);return}p!==null&&b!==null&&(e<p?C(e):e>b?k(e):C(e))}const H=e=>!e||typeof e!="string"?null:e.split(",")[0].trim(),Ye=(()=>{if(p!==null&&P[p]?.city)return P[p].city;if(u){const s=u.tour.fullStops?.[0]?.city??H(u.tour.additionalInfo?.startingPoint);if(s)return s}if(f&&f.length>0&&f[0].stop?.city)return f[0].stop.city;const e=H(c?.additionalInfo?.startingPoint);return e||(P[0]?.city??"â€”")})(),Oe=(()=>{if(b!==null&&P[b]?.city)return P[b].city;if(u){const s=u.tour.fullStops??[],r=(s.length?s[s.length-1]?.city:void 0)??H(u.tour.additionalInfo?.endingPoint);if(r)return r}if(f&&f.length>0&&f[f.length-1].stop?.city)return f[f.length-1].stop.city;const e=H(c?.additionalInfo?.endingPoint);return e||(P[Math.max(D-1,0)]?.city??"â€”")})();function Je(e){U(s=>s===e?null:e),M===e&&$(null),setTimeout(()=>document.getElementById(`tb-row-${e}`)?.scrollIntoView({behavior:"smooth",block:"center"}),120)}function Ke(e){const s=O.find(n=>n.slug===e);!s||M===null||!c||($({tour:s,insertAfterIndex:M}),U(null))}function qe(){$(null)}function Qe(){C(null),k(null)}if(c===void 0)return t.jsx("div",{className:"p-8",children:t.jsxs("div",{className:"animate-pulse space-y-4 max-w-4xl",children:[t.jsx("div",{className:"h-56 rounded-2xl bg-slate-200"}),t.jsx("div",{className:"h-6 w-3/4 rounded bg-slate-200"}),t.jsx("div",{className:"h-40 rounded-2xl bg-slate-100"})]})});if(c===null)return t.jsxs("div",{className:"p-8",children:[t.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-3",children:"Route not found"}),t.jsx("p",{className:"text-slate-600 mb-6",children:"Please choose another route to customize."}),t.jsx("div",{className:"max-w-md",children:t.jsxs("select",{"aria-label":"Choose a route",className:"w-full border rounded-xl px-4 py-3 bg-white shadow-sm",onChange:e=>De(`/tour/builder/${e.target.value}`),defaultValue:"",children:[t.jsx("option",{value:"",disabled:!0,children:"Choose a route..."}),O.map(e=>t.jsx("option",{value:e.slug,children:e.title},e.slug))]})})]});const W=We(),ee=!!(c&&R),Ze={background:"linear-gradient(180deg, rgba(2,18,51,1) 0%, rgba(8,42,102,1) 35%, rgba(4,18,55,1) 100%)","--accent-yellow":"#FFD24D","--accent-yellow-600":"#FFC107","--muted-slate":"#94a3b8"},ge=c?.additionalInfo?.countriesVisited??[];return t.jsxs("div",{className:"min-h-screen py-10",style:Ze,children:[t.jsx("style",{children:`
        .accent-yellow { color: var(--accent-yellow); }
        .bg-accent-yellow { background-color: var(--accent-yellow); }
        .ring-accent-yellow { box-shadow: 0 0 0 3px rgba(255,210,77,0.12); }
        .tab-underline { transition: transform .25s cubic-bezier(.2,.9,.2,1), opacity .25s; }
        .fade-enter { opacity: 0; transform: translateY(6px); }
        .fade-enter-active { opacity: 1; transform: translateY(0); transition: all .28s ease; }
        .card-glass { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); backdrop-filter: blur(6px); border: 1px solid rgba(255,255,255,0.06); }
        .modal-backdrop { background: rgba(2,6,23,0.6); }

        /* Timeline highlight adjustments */
        .timeline-section { 
          padding: 32px; 
          border-radius: 24px; 
          background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); 
          backdrop-filter: blur(8px);
        }
        .timeline-rail { background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)); width: 2px; }
        .timeline-row { 
          transition: all .25s ease; 
          padding: 20px;
          margin-bottom: 24px;
          border-radius: 16px;
          background: rgba(255,255,255,0.01);
          border: 1px solid rgba(255,255,255,0.05);
        }
        .timeline-row:hover { 
          background: rgba(255,255,255,0.03); 
          transform: translateY(-4px); 
          box-shadow: 0 12px 40px rgba(0,0,0,0.3);
          border-color: rgba(255,210,77,0.3);
        }
        .timeline-card { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border: 1px solid rgba(255,255,255,0.04); }
        .timeline-marker { width: 44px; height: 44px; border-radius: 9999px; display: grid; place-items: center; }
        .timeline-marker.included { background: linear-gradient(180deg,#2563eb,#1e40af); box-shadow: 0 6px 20px rgba(2,6,23,0.5); color: white; border: 2px solid rgba(255,255,255,0.06); }
        .timeline-marker.default { background: rgba(255,255,255,0.06); color: rgba(255,255,255,0.8); border: 1px solid rgba(255,255,255,0.04); }
        .timeline-bar { box-shadow: 0 8px 30px rgba(2,6,23,0.45); border-radius: 8px; opacity: 0.98; }
        .timeline-connector { opacity: 0.95; box-shadow: 0 6px 20px rgba(2,6,23,0.35); border-radius: 8px; }
        .timeline-heading { color: #e6eefc; font-weight: 700; }
        .timeline-sub { color: rgba(230,238,252,0.75); }
        .timeline-small { color: rgba(230,238,252,0.6); }

        /* Increase small font sizes by 5% inside timeline and card areas to improve readability */
        .timeline-section .text-xs,
        .timeline-section .timeline-small,
        .card-glass .text-xs,
        .card-glass .timeline-small {
          font-size: 105% !important;
          line-height: 1.25;
        }

        /* Badge interaction */
        .badge-filter { cursor: pointer; transition: transform .12s; }
        .badge-filter:hover { transform: translateY(-2px); }
        .badge-active { box-shadow: 0 6px 18px rgba(2,6,23,0.5); transform: scale(1.02); }
      `}),t.jsx("div",{ref:Ce}),t.jsx("div",{className:"container mx-auto px-6 lg:px-12 text-slate-200",children:t.jsxs("div",{className:"grid lg:grid-cols-[minmax(0,1fr)_380px] gap-12",children:[t.jsx("div",{className:"space-y-8",children:t.jsxs("section",{className:"relative rounded-3xl card-glass shadow-sm overflow-visible p-6 timeline-section","aria-label":"Timeline",children:[D===0||P.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[t.jsx("div",{className:"text-lg font-semibold text-slate-300 mb-2",children:"No stops or itinerary found for this tour."}),t.jsx("div",{className:"text-sm text-slate-400 mb-4",children:"Please check the tour data or select a different route."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"relative",children:[ke.map((e,s)=>t.jsx("div",{className:"absolute timeline-bar",style:{top:`${e.top}px`,height:`${e.height}px`,left:`${e.x}px`,width:"12px",backgroundColor:e.color}},s)),Ie.map((e,s)=>t.jsx("div",{className:"absolute timeline-connector",style:{top:`${e.top}px`,left:`${e.left}px`,width:`${e.width}px`,height:"6px",background:e.gradient}},s))]}),t.jsx("div",{className:"space-y-6",ref:q,children:Array.from({length:D}).map((e,s)=>{const n=$e(s),r=Me(n),l=Ue(n),x=Fe[s]?.map(i=>i.city).join(", "),o=oe[c?.line??"DEFAULT"]??oe.DEFAULT,a=c?.itinerary?.[s];return t.jsxs("div",{ref:i=>{_.current[s]=i},id:`tb-row-${s}`,className:`timeline-row ${o} cursor-pointer hover:shadow-lg transition-all duration-200`,onClick:()=>Xe(s),children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"bg-accent-yellow text-slate-900 rounded-full w-10 h-10 flex items-center justify-center font-bold text-sm",children:s+1}),t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-bold text-white",children:a?.title||`Day ${s+1}`}),t.jsxs("div",{className:"text-sm text-slate-400",children:[r,", ",l]})]})]}),t.jsx("div",{className:"text-sm text-slate-300 bg-white/5 px-3 py-1 rounded-full",children:x||"Location"})]}),t.jsxs("div",{className:"bg-white/3 rounded-lg overflow-hidden border border-white/10 hover:border-accent-yellow/50 transition-colors",children:[a?.image&&t.jsxs("div",{className:"relative h-48 overflow-hidden",children:[t.jsx("img",{src:a.image,alt:a.title||`Day ${s+1}`,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"})]}),t.jsxs("div",{className:"p-4",children:[a?.description&&t.jsx("p",{className:"text-slate-200 text-sm leading-relaxed",children:a.description}),t.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[t.jsx("button",{type:"button",onClick:i=>{i.stopPropagation(),Je(s)},className:"px-3 py-1.5 bg-white/10 hover:bg-white/20 text-white rounded text-xs font-medium transition-colors",children:"Customize Day"}),x&&t.jsxs("div",{className:"text-xs text-slate-400",children:["ðŸ“ ",x]})]})]})]}),M===s&&t.jsxs("div",{className:"mt-4 p-4 bg-slate-800/50 rounded-lg border border-accent-yellow/30",children:[t.jsxs("h4",{className:"text-sm font-semibold text-white mb-3",children:["Insert Alternative Route After Day ",s+1]}),t.jsxs("select",{className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white text-sm",onChange:i=>{i.target.value&&Ke(i.target.value)},defaultValue:"",children:[t.jsx("option",{value:"",children:"Select a route..."}),O.filter(i=>i.slug!==c?.slug).map(i=>t.jsx("option",{value:i.slug,children:i.title},i.slug))]}),t.jsx("button",{type:"button",onClick:()=>U(null),className:"mt-2 text-xs text-slate-400 hover:text-white",children:"Cancel"})]})]},s)})}),u&&t.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-xl border border-purple-400/30",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-white",children:"Additional Route Inserted"}),t.jsx("div",{className:"text-xs text-slate-300 mt-1",children:u.tour.title})]}),t.jsx("button",{type:"button",onClick:qe,className:"px-3 py-1.5 bg-red-500/20 hover:bg-red-500/30 text-red-200 rounded text-xs font-medium transition-colors",children:"Remove"})]})})]}),(p!==null||b!==null)&&t.jsx("div",{className:"flex justify-center mt-6",children:t.jsx("button",{onClick:Qe,className:"w-12 h-12 rounded-full bg-amber-600 text-slate-900 grid place-items-center shadow-lg hover:scale-105 transition-transform",title:"Reset segment",type:"button",children:"âœ•"})})]})}),t.jsxs("aside",{className:"space-y-6",children:[t.jsxs("div",{className:"rounded-3xl card-glass shadow-lg overflow-hidden",children:[t.jsx("img",{src:ot(c.images?.[0])?c.images?.[0]:"/assets/placeholder.jpg",alt:c.title,className:"w-full h-36 object-cover"}),t.jsxs("div",{className:"p-6 space-y-5 text-slate-200",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-slate-400",children:"Tour Details"}),t.jsxs("div",{className:"mt-3 text-sm",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs text-slate-400",children:"Start"}),t.jsx("span",{className:"font-medium",children:ue(R)})]}),t.jsxs("div",{className:"flex items-center justify-between mt-2",children:[t.jsx("span",{className:"text-xs text-slate-400",children:"End"}),t.jsx("span",{className:"font-medium",children:ue(Ge()??void 0)})]}),t.jsxs("div",{className:"flex items-center justify-between mt-3",children:[t.jsx("span",{className:"text-xs text-slate-400",children:"From"}),t.jsx("span",{className:"font-medium",children:Ye})]}),t.jsxs("div",{className:"flex items-center justify-between mt-2",children:[t.jsx("span",{className:"text-xs text-slate-400",children:"To"}),t.jsx("span",{className:"font-medium",children:Oe})]}),t.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[t.jsxs("span",{className:"inline-flex items-center gap-2 bg-white/6 text-slate-200 px-3 py-1 rounded-full text-sm",children:["â€¢ ",c?.durationDays??N.length," days"]}),c?.guaranteedDeparture&&t.jsx("span",{className:"inline-flex items-center gap-2 bg-emerald-600/20 text-emerald-200 px-3 py-1 rounded-full text-sm",children:"Guaranteed departure"}),ge.length>0&&ge.map(e=>t.jsx("button",{title:`Filter timeline by ${e}`,onClick:()=>K(s=>s===e?null:e),className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm badge-filter ${re===e?"badge-active bg-accent-yellow text-slate-900":"bg-white/6 text-slate-200"}`,children:e},e)),re&&t.jsx("button",{onClick:()=>K(null),className:"text-xs underline text-slate-300 ml-2",children:"Clear filter"})]})]})]}),t.jsxs("div",{className:"border-t pt-3 text-xs text-slate-400",children:[t.jsx("div",{children:"Duration"}),t.jsxs("div",{className:"text-base font-semibold text-slate-200",children:[me()," Days"]})]}),t.jsxs("div",{className:"border-t pt-3 text-xs text-slate-400",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{children:"Passengers"}),t.jsxs("div",{className:"text-base font-semibold text-slate-200",children:[S," Pax",B&&I>0?` + ${I} Infant(s)`:""]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{type:"button","aria-label":"Decrease passengers",onClick:()=>fe(-1),className:"w-8 h-8 rounded-full border flex items-center justify-center hover:bg-white/6 text-slate-200",children:"âˆ’"}),t.jsx("input",{"aria-label":"Passengers",className:"w-14 text-center rounded-md border px-2 py-1 text-sm bg-transparent text-slate-200",value:S,onChange:Ve,inputMode:"numeric",pattern:"[0-9]*"}),t.jsx("button",{type:"button","aria-label":"Increase passengers",onClick:()=>fe(1),className:"w-8 h-8 rounded-full border flex items-center justify-center hover:bg-white/6 text-slate-200",children:"+"})]})]}),t.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{id:"infant-checkbox",type:"checkbox",checked:B,onChange:()=>{ne(e=>{const s=!e;return s||F(1),s})},className:"w-4 h-4"}),t.jsx("label",{htmlFor:"infant-checkbox",className:"text-sm text-slate-300",children:"Include infant (price TBD)"})]}),B&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{type:"button","aria-label":"Decrease infants",onClick:()=>he(-1),className:"w-8 h-8 rounded-full border flex items-center justify-center hover:bg-white/6 text-slate-200",children:"âˆ’"}),t.jsx("input",{"aria-label":"Infants",className:"w-14 text-center rounded-md border px-2 py-1 text-sm bg-transparent text-slate-200",value:I,onChange:ze,inputMode:"numeric",pattern:"[0-9]*"}),t.jsx("button",{type:"button","aria-label":"Increase infants",onClick:()=>he(1),className:"w-8 h-8 rounded-full border flex items-center justify-center hover:bg-white/6 text-slate-200",children:"+"})]})]})]}),t.jsx("div",{className:"border-t pt-4",children:t.jsxs("div",{className:"flex flex-col gap-2",children:[W.lines.map((e,s)=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"text-xs text-slate-400",children:e.label}),t.jsx("div",{className:"text-sm font-semibold text-slate-200",children:e.value})]},s)),W.totalValue?t.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[t.jsx("div",{className:"text-xs text-slate-400",children:W.totalLabel}),t.jsx("div",{className:"text-base font-semibold text-slate-200",children:W.totalValue})]}):null,t.jsxs("div",{className:"flex items-center justify-between pt-3",children:[t.jsx("div",{className:"text-xs text-slate-400",children:"Total"}),t.jsx("div",{className:"text-2xl font-extrabold text-slate-200",children:He()})]})]})}),t.jsx("div",{className:"mt-6",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx(we,{to:`/tour/${encodeURIComponent(c?.slug??y??"")}`,className:"flex-1 px-3 py-2 border rounded text-center text-sm hover:bg-white/6 text-slate-200",children:"Back to tour"}),t.jsx(we,{to:`/booking/${encodeURIComponent(c?.slug??y??"")}`,state:{tour:c,inlineInsert:u,selectedDate:R,passengers:S,perPerson:Z().totalPerPerson},className:`flex-1 text-center px-3 py-2 rounded font-semibold text-sm ${ee?"bg-accent-yellow text-slate-900 hover:bg-accent-yellow-600":"bg-white/6 text-slate-400 cursor-not-allowed"}`,"aria-disabled":!ee,onClick:e=>{ee||e.preventDefault()},children:"BOOK NOW"})]})})]})]}),t.jsx("div",{className:"rounded-2xl card-glass p-5 text-sm text-slate-300 shadow-sm",children:"Tip: Select a date to auto-select the full segment. Use the colored markers to fine-tune your join/leave days."})]})]})})]})}export{ct as default};
