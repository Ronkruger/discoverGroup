import{a,u as p,j as e,L as f}from"./index-COMo_l_O.js";const j="http://localhost:4000";function y(){const[o,m]=a.useState(""),[l,h]=a.useState(""),[i,r]=a.useState(""),[d,c]=a.useState(!1),[u,x]=a.useState(!1),g=p();async function b(t){t.preventDefault(),c(!0),r("");try{const s=await fetch(`${j}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:l})}),n=await s.json();if(!s.ok)throw new Error(n.error||"Login failed");localStorage.setItem("token",n.token),localStorage.setItem("user",JSON.stringify(n.user)),g("/")}catch(s){s instanceof Error?r(s.message):r(String(s))}finally{c(!1)}}return e.jsxs("div",{className:"max-w-md mx-auto mt-12 p-6 bg-white rounded shadow",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Client Login"}),i&&e.jsx("div",{className:"mb-3 text-red-600",children:i}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Email"}),e.jsx("input",{type:"email",className:"w-full border rounded px-3 py-2",value:o,onChange:t=>m(t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:u?"text":"password",className:"w-full border rounded px-3 py-2 pr-10",value:l,onChange:t=>h(t.target.value),required:!0}),e.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500",tabIndex:-1,onClick:()=>x(t=>!t),children:u?"🙈":"👁️"})]})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded font-semibold",disabled:d,children:d?"Logging in...":"Login"})]}),e.jsxs("div",{className:"mt-4 text-sm text-center",children:["Don't have an account?"," ",e.jsx(f,{to:"/register",className:"text-blue-600 hover:underline",children:"Register"})]})]})}export{y as default};
