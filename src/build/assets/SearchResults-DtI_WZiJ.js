import{o as v,a as n,j as e,L as b,f as j,n as N}from"./index-COMo_l_O.js";function S(){const[g]=v(),l=g.get("countries")??"",[i,c]=n.useState([]),[d,f]=n.useState(!0),[x,u]=n.useState(1);n.useEffect(()=>{let s=!1;async function t(){f(!0);try{if(!l){const a=await j();s||c(a);return}const r=await N(l);s||c(r)}catch(r){console.error("fetchToursByCountry error",r),s||c([])}finally{s||f(!1)}}return t(),()=>{s=!0}},[l]);function p(s){const t=s,r=typeof t.regularPricePerPerson=="number"?t.regularPricePerPerson:void 0,a=typeof t.promoPricePerPerson=="number"?t.promoPricePerPerson:void 0;if(r!==void 0||a!==void 0)return{regular:r,promo:a,effective:r??a??0};const m=s.durationDays??s.itinerary?.length??0,h=Math.round((t.basePricePerDay??0)*m);return{regular:h,promo:void 0,effective:h}}function o(s){return`PHP ${s.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`}return e.jsx("main",{className:"min-h-[80vh] bg-gradient-to-br from-blue-50 via-white to-yellow-50/40 py-10",children:e.jsxs("div",{className:"container mx-auto px-5",children:[e.jsxs("header",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-extrabold text-blue-900 drop-shadow-sm",children:"Search results"}),e.jsxs("p",{className:"text-slate-600 text-base",children:["Showing tours for ",e.jsx("span",{className:"font-semibold text-blue-700",children:l||"all countries"}),"."]})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-white/80 rounded-xl shadow px-4 py-2 border border-slate-200",children:[e.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Passengers"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>u(s=>Math.max(1,s-1)),className:"w-9 h-9 rounded-full border border-slate-300 flex items-center justify-center text-lg font-bold bg-slate-100 hover:bg-blue-100 active:bg-blue-200 transition","aria-label":"Decrease passengers",children:"‚àí"}),e.jsx("input",{"aria-label":"Passengers",className:"w-14 text-center rounded-lg border border-slate-300 px-2 py-1 text-base font-semibold bg-white shadow-sm focus:ring-2 focus:ring-blue-300",value:x,onChange:s=>{const t=parseInt(s.target.value,10);!Number.isNaN(t)&&t>=1&&u(t)},inputMode:"numeric",pattern:"[0-9]*"}),e.jsx("button",{type:"button",onClick:()=>u(s=>s+1),className:"w-9 h-9 rounded-full border border-slate-300 flex items-center justify-center text-lg font-bold bg-slate-100 hover:bg-blue-100 active:bg-blue-200 transition","aria-label":"Increase passengers",children:"+"})]})]})]}),d&&e.jsx("div",{className:"text-slate-500",children:"Loading results‚Ä¶"}),!d&&i.length===0&&e.jsx("div",{className:"p-8 border rounded-2xl bg-white/80 text-slate-600 shadow-md text-center text-lg font-medium",children:"No tours found."}),!d&&i.length>0&&e.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:i.map(s=>{const t=p(s),r=t.regular??t.effective,a=t.promo,m=r*Math.max(1,x);return e.jsxs("article",{className:"bg-white/90 border border-slate-200 rounded-3xl overflow-hidden shadow-xl hover:shadow-2xl transition-shadow duration-200 flex flex-col",children:[e.jsxs("div",{className:"relative h-48 bg-gray-100",children:[e.jsx("img",{src:s.images?.[0]??"/assets/placeholder.jpg",alt:s.title,className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-blue-900/40 to-transparent"}),e.jsxs("div",{className:"absolute top-4 left-4 bg-yellow-400 text-blue-900 text-xs font-bold px-3 py-1 rounded-full shadow",children:[s.durationDays," Days"]})]}),e.jsxs("div",{className:"p-5 flex flex-col flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-1 drop-shadow-sm",children:s.title}),e.jsx("p",{className:"text-sm text-slate-600 mb-3 line-clamp-2",children:s.summary}),e.jsxs("div",{className:"mt-auto flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Per head"}),e.jsx("div",{className:"text-base font-bold text-blue-900",children:o(r)})]}),a!==void 0&&t.regular!==void 0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Promo"}),e.jsx("div",{className:"text-xs font-semibold text-rose-600 line-through",children:o(t.regular)}),e.jsx("div",{className:"text-sm font-bold text-rose-600",children:o(a)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"text-xs text-slate-500",children:["Total (",x," pax)"]}),e.jsx("div",{className:"text-base font-bold text-blue-900",children:o(m)})]})]}),e.jsxs("div",{className:"mt-5 flex gap-3",children:[e.jsxs(b,{to:`/tour/builder/${s.slug}`,className:"flex-1 flex items-center justify-center gap-2 text-xs px-4 py-2 bg-blue-50 text-blue-800 font-semibold rounded-full shadow hover:bg-blue-100 hover:scale-105 transition-all duration-150",children:[e.jsx("span",{children:"üõ†Ô∏è"})," Builder"]}),e.jsxs(b,{to:`/tour/${s.slug}`,className:"flex-1 flex items-center justify-center gap-2 text-xs px-4 py-2 bg-gradient-to-r from-rose-500 to-rose-600 text-white font-semibold rounded-full shadow hover:from-rose-400 hover:to-rose-500 hover:scale-105 transition-all duration-150",children:[e.jsx("span",{children:"üîé"})," View"]})]})]})]},s.slug)})})]})})}export{S as default};
