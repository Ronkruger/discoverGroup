import{c as k,a as d,j as t,e as T,C as _,d as U,h as R,M as G,L as V}from"./index-7zN7D-LI.js";import{C as q}from"./circle-check-big-BxtoeVWd.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],F=k("arrow-right",B);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],J=k("heart",O),h=e=>typeof e=="number",K=e=>typeof e=="string",Q=e=>Array.isArray(e)&&e.every(x=>typeof x=="string"),X=e=>typeof e=="object"&&e!==null&&"startDate"in e&&"endDate"in e&&typeof e.startDate=="string"&&typeof e.endDate=="string";function se({tour:e,onWishlist:x,onShare:C,isWishlisted:$=!1}){const[m,y]=d.useState(!1),[i,I]=d.useState($),[j,g]=d.useState(0);d.useEffect(()=>{if(!m||!e.images||e.images.length<=1)return;const n=setInterval(()=>{g(s=>(s+1)%e.images.length)},1e3);return()=>clearInterval(n)},[m,e.images]);const A=n=>{n.preventDefault(),n.stopPropagation();const s=!i;I(s),x?.(e.slug,s)},L=n=>{n.preventDefault(),n.stopPropagation(),C?.(e)},o=h(e.regularPricePerPerson)?e.regularPricePerPerson:void 0,p=h(e.promoPricePerPerson)?e.promoPricePerPerson:void 0,z=h(e.price)?e.price:void 0,D=h(e.rating)?e.rating:void 0,E=K(e.travelDate)?e.travelDate:void 0,l=Q(e.countries)?e.countries:void 0,M=new Date,f=e.isSaleEnabled&&e.saleEndDate&&new Date(e.saleEndDate)>M&&p&&o&&p<o,u=f?p:o||z,r=f?o:void 0,N=r&&u?Math.round((r-u)/r*100):0,c=Array.isArray(e.departureDates)?e.departureDates:[],b=e.travelWindow,P=(()=>{if(c.length>0){const n=new Date,s=a=>typeof a=="object"&&a!==null&&"startDate"in a&&"endDate"in a&&typeof a.startDate=="string"&&typeof a.endDate=="string",S=c.filter(s).filter(a=>new Date(a.startDate)>n).sort((a,w)=>new Date(a.startDate).getTime()-new Date(w.startDate).getTime());if(S.length>0){const a=S[0],w=new Date(a.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric"}),H=new Date(a.endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${w} - ${H}`}}if(X(b)){const n=new Date(b.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric"}),s=new Date(b.endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${n} - ${s}`}return E})(),W=e.images?.[j]??"/image.png";return t.jsxs("article",{className:"group relative rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-3 hover:scale-105 h-80 flex flex-col cursor-pointer",onMouseEnter:()=>y(!0),onMouseLeave:()=>{y(!1),g(0)},role:"article","aria-labelledby":`tour-title-${e.slug}`,children:[t.jsxs("div",{className:"absolute inset-0 transition-transform duration-300 group-hover:scale-110 group-hover:brightness-105",children:[t.jsx("img",{src:W,alt:e.title,className:"w-full h-full object-cover transition-opacity duration-500",loading:"lazy"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-black/10"})]}),t.jsxs("div",{className:"absolute top-3 right-3 flex gap-2 z-20",children:[e.images&&e.images.length>1&&t.jsxs("div",{className:"bg-black/50 text-white px-2 py-1 rounded-full text-xs",children:["ðŸ“· ",e.images.length]}),t.jsx("button",{onClick:A,className:`p-2 rounded-full backdrop-blur-sm transition-all duration-200 hover:scale-110 ${i?"bg-red-500/90 text-white":"bg-white/80 text-gray-700 hover:bg-white"}`,"aria-label":i?"Remove from wishlist":"Add to wishlist",children:t.jsx(J,{className:`w-4 h-4 ${i?"fill-current":""}`})}),t.jsx("button",{onClick:L,className:"p-2 bg-white/80 text-gray-700 rounded-full backdrop-blur-sm hover:bg-white transition-all duration-200 hover:scale-110","aria-label":"Share tour",children:t.jsx(T,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"absolute top-3 left-3 flex flex-col gap-2 z-10",children:[t.jsxs("span",{className:"bg-yellow-400 text-blue-900 text-xs font-semibold px-3 py-1 rounded-full shadow-lg",children:[t.jsx(_,{className:"w-3 h-3 inline mr-1"}),e.durationDays," days"]}),f&&N>0&&t.jsxs("span",{className:"bg-red-500 text-white text-xs font-semibold px-3 py-1 rounded-full shadow-lg",children:["Save ",N,"%"]})]}),t.jsxs("div",{className:"absolute bottom-20 left-3 flex flex-wrap gap-2 z-10",children:[t.jsxs("span",{className:"bg-green-600/90 text-white px-2 py-1 rounded text-xs flex items-center gap-1 backdrop-blur-sm",children:[t.jsx(q,{className:"w-3 h-3"}),"Guaranteed Departure"]}),t.jsx("span",{className:"bg-blue-600/90 text-white px-2 py-1 rounded text-xs backdrop-blur-sm",children:"ðŸ—£ï¸ English Guide"}),D&&t.jsxs("span",{className:"bg-yellow-500/90 text-white px-2 py-1 rounded text-xs flex items-center gap-1 backdrop-blur-sm",children:[t.jsx(U,{className:"w-3 h-3 fill-current"}),D.toFixed(1)]})]}),t.jsxs("div",{className:"relative z-10 p-5 flex flex-col justify-end h-full text-white",children:[t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("h3",{id:`tour-title-${e.slug}`,className:"text-lg font-bold leading-snug drop-shadow-md line-clamp-2",children:e.title}),t.jsx("p",{className:"text-sm text-gray-200 drop-shadow line-clamp-2",children:e.summary}),t.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-300 mt-1",children:[P&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(R,{className:"w-3 h-3"}),t.jsx("span",{children:P})]}),c.length>1&&t.jsx("div",{className:"flex items-center gap-1 bg-blue-600/80 px-2 py-1 rounded",children:t.jsxs("span",{children:["+",c.length-1," more dates"]})}),l&&l.length>0&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(G,{className:"w-3 h-3"}),t.jsx("span",{children:l.slice(0,2).join(", ")}),l.length>2&&t.jsxs("span",{children:["+",l.length-2]})]})]})]}),t.jsxs("div",{className:"flex justify-between items-end mt-4",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("div",{className:"text-xs text-gray-300",children:"Starting from"}),t.jsxs("div",{className:"flex items-center gap-2",children:[r&&t.jsxs("span",{className:"text-sm text-gray-400 line-through",children:["PHP ",r.toLocaleString()]}),t.jsxs("span",{className:"text-lg font-bold text-yellow-400",children:["PHP ",u?.toLocaleString()||"N/A"]})]}),t.jsx("div",{className:"text-xs text-gray-300",children:"/person"})]}),t.jsxs(V,{to:`/tour/${e.slug}`,className:"inline-flex items-center gap-2 bg-blue-600 text-white text-sm font-medium px-4 py-2 rounded-full shadow-lg hover:bg-blue-700 transition-all duration-200 transform hover:scale-105","aria-label":`View details for ${e.title}`,children:["More Info ",t.jsx(F,{size:16})]})]})]}),e.images&&e.images.length>1&&m&&t.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex gap-1 z-20",children:e.images.map((n,s)=>t.jsx("button",{className:`w-2 h-2 rounded-full transition-all ${s===j?"bg-white":"bg-white/50"}`,onClick:v=>{v.preventDefault(),v.stopPropagation(),g(s)},"aria-label":`View image ${s+1}`},s))})]})}export{se as T};
