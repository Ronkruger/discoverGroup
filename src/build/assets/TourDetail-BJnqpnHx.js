import{c as O,a as d,j as e,h as ce,U as de,i as me,R as xe,k as he,L as $}from"./index-7zN7D-LI.js";import{C as ue}from"./circle-check-big-BxtoeVWd.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],pe=O("chevron-left",ge);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fe=O("chevron-right",be);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],je=O("circle-alert",ye);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],we=O("circle-x",ve);function Ne({departureDates:h,selectedDate:t,onSelectDate:C,className:p=""}){const[i,v]=d.useState(new Date),I=d.useMemo(()=>{const l=new Map;return h.forEach(r=>{r.start&&l.set(r.start,r)}),l},[h]),f=d.useMemo(()=>{const l=i.getFullYear(),r=i.getMonth(),g=new Date(l,r,1),o=new Date(g);o.setDate(o.getDate()-o.getDay());const m=[],b=new Date(o);for(let S=0;S<42;S++)m.push(new Date(b)),b.setDate(b.getDate()+1);return m},[i]),N=()=>{v(new Date(i.getFullYear(),i.getMonth()-1))},u=()=>{v(new Date(i.getFullYear(),i.getMonth()+1))},w=l=>l.toISOString().split("T")[0],R=l=>{const r=w(l);return I.get(r)},z=l=>{if(!l||l.isAvailable===!1)return"unavailable";if(l.maxCapacity&&l.currentBookings!==void 0){const r=l.maxCapacity-l.currentBookings;return r===0?"full":r<=l.maxCapacity*.2?"limited":"available"}return"available"},V=l=>{switch(l){case"available":return"bg-green-500 text-white hover:bg-green-600";case"limited":return"bg-yellow-500 text-white hover:bg-yellow-600";case"full":return"bg-red-500 text-white cursor-not-allowed";case"unavailable":default:return"bg-gray-100 text-gray-400"}},F=l=>{switch(l){case"available":return e.jsx(ue,{className:"w-4 h-4"});case"limited":return e.jsx(je,{className:"w-4 h-4"});case"full":return e.jsx(we,{className:"w-4 h-4"});default:return null}},T=l=>{const r=new Date;return l.toDateString()===r.toDateString()},_=l=>l.getMonth()===i.getMonth(),H=i.toLocaleDateString("en-US",{month:"long",year:"numeric"});return e.jsxs("div",{className:`bg-white rounded-2xl shadow-lg p-6 ${p}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5 text-blue-600"}),"Select Departure Date"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:N,className:"p-2 hover:bg-gray-100 rounded-lg transition","aria-label":"Previous month",children:e.jsx(pe,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-sm font-medium text-gray-700 min-w-[140px] text-center",children:H}),e.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 rounded-lg transition","aria-label":"Next month",children:e.jsx(fe,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-2 mb-4",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(l=>e.jsx("div",{className:"text-center text-xs font-semibold text-gray-500 py-2",children:l},l)),f.map((l,r)=>{const g=w(l),o=R(l),m=z(o),b=t===g,S=T(l),P=_(l);return e.jsx("button",{onClick:()=>{o&&m!=="full"&&m!=="unavailable"&&C(g)},disabled:!o||m==="full"||m==="unavailable",className:`
                relative aspect-square rounded-lg text-sm font-medium transition-all
                ${P?"":"opacity-30"}
                ${b?"ring-2 ring-blue-600 ring-offset-2":""}
                ${S&&!b?"ring-1 ring-blue-300":""}
                ${o?V(m):"text-gray-400"}
              `,title:o?`${m.charAt(0).toUpperCase()+m.slice(1)} - ${o.currentBookings||0}/${o.maxCapacity||"‚àû"} booked`:"No departure",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx("span",{children:l.getDate()}),o&&e.jsx("span",{className:"absolute bottom-1 right-1",children:F(m)})]})},r)})]}),e.jsxs("div",{className:"border-t pt-4 space-y-2",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-3",children:"Availability Legend"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{className:"text-gray-600",children:"Available"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),e.jsx("span",{className:"text-gray-600",children:"Limited Spots"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),e.jsx("span",{className:"text-gray-600",children:"Fully Booked"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-100 rounded border"}),e.jsx("span",{className:"text-gray-600",children:"Not Available"})]})]})]}),t&&I.get(t)&&e.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(de,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:["Selected: ",new Date(t).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),(()=>{const l=I.get(t);if(l?.maxCapacity&&l.currentBookings!==void 0){const r=l.maxCapacity-l.currentBookings;return e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:r})," spot",r!==1?"s":""," remaining out of ",l.maxCapacity,l.price&&e.jsxs("span",{className:"ml-2 text-blue-700 font-semibold",children:["Special Price: $",l.price.toFixed(2)]})]})}return e.jsx("p",{className:"text-sm text-gray-600",children:"Unlimited availability"})})()]})]})})]})}function ke({src:h}){const[t,C]=d.useState(!1);return e.jsxs("div",{style:{position:"relative"},children:[t?e.jsxs("div",{style:{width:"100%",height:"70vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#fff",border:"2px solid #FFD24D"},children:[e.jsx("img",{src:"/assets/placeholder.jpg",alt:"placeholder",style:{maxHeight:"60vh",maxWidth:"80vw"}}),e.jsxs("div",{style:{position:"absolute",top:10,left:10,zIndex:1e3,color:"yellow",background:"rgba(0,0,0,0.7)",padding:"6px",fontSize:"12px",maxWidth:"80vw",wordBreak:"break-all"},children:[e.jsx("b",{children:"DEBUG src:"})," ",h,e.jsx("br",{}),e.jsx("span",{style:{color:"red"},children:"Image failed to load. Check Supabase permissions or URL."})]})]}):e.jsx("img",{src:h,alt:"Gallery",className:"w-full h-[70vh] object-contain border-2 border-yellow-400 bg-white",onLoad:p=>{const i=p.currentTarget;console.log("Gallery image loaded:",i.src,"naturalWidth:",i.naturalWidth,"naturalHeight:",i.naturalHeight)},onError:()=>{C(!0),console.error("Gallery image failed to load:",h)}}),!t&&e.jsxs("div",{style:{position:"absolute",top:10,left:10,zIndex:1e3,color:"yellow",background:"rgba(0,0,0,0.7)",padding:"6px",fontSize:"12px",maxWidth:"80vw",wordBreak:"break-all"},children:[e.jsx("b",{children:"DEBUG src:"})," ",h]})]})}function Ie(){const{slug:h}=me(),[t,C]=d.useState(null),[p,i]=d.useState(null),[v,I]=d.useState(1),[f,N]=d.useState("itinerary"),[u,w]=d.useState(0),[R,z]=d.useState(!1),[V,F]=d.useState(0),[T,_]=d.useState(!1),[H,l]=d.useState(!1),r=xe.useMemo(()=>t?.galleryImages&&Array.isArray(t.galleryImages)&&t.galleryImages.length>0?t.galleryImages:Array.isArray(t?.images)?t.images:[],[t?.galleryImages,t?.images]);console.log("images for gallery",r);const g=d.useRef(null),o=d.useRef(null);d.useEffect(()=>{let s=!1;if(h)return(async()=>{try{const a=await he(h);if(s)return;if(C(a),a&&(console.log("tour.galleryImages",a.galleryImages),console.log("tour",a)),a){const n=a.travelWindow?.start??(a.departureDates&&a.departureDates.length?typeof a.departureDates[0]=="string"?a.departureDates[0]:JSON.stringify(a.departureDates[0]):null);i(n)}}catch(a){console.error("fetchTourBySlug error",a),s||C(null)}})(),()=>{s=!0}},[h]),d.useEffect(()=>{if(r.length>1)return g.current=window.setInterval(()=>{w(s=>r.length?(s+1)%r.length:0)},4500),()=>{g.current&&(clearInterval(g.current),g.current=null)};g.current&&(clearInterval(g.current),g.current=null)},[r]);function m(s){if(!o.current||!s)return;const a=o.current.querySelector(`[data-date="${s}"]`);if(a)try{a.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),a.focus()}catch{a.scrollIntoView({behavior:"smooth"})}else try{o.current.scrollIntoView({behavior:"smooth",block:"center"})}catch{}}d.useEffect(()=>{const s=a=>{const n=t?.departureDates;if(!n||n.length===0||!p)return;const c=n.findIndex(x=>typeof x=="string"?x===p:JSON.stringify(x)===p);if(c===-1)return;const G=window.innerWidth>=640?2:1;function D(x){return typeof x=="string"?x:JSON.stringify(x)}if(a.key==="ArrowLeft"){const x=n[Math.max(0,c-1)],j=D(x);i(j),m(j)}else if(a.key==="ArrowRight"){const x=n[Math.min(n.length-1,c+1)],j=D(x);i(j),m(j)}else if(a.key==="ArrowUp"){const x=Math.max(0,c-G),j=n[x],A=D(j);i(A),m(A)}else if(a.key==="ArrowDown"){const x=Math.min(n.length-1,c+G),j=n[x],A=D(j);i(A),m(A)}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[p,t?.departureDates]);const b=s=>{if(!s)return"";if(/\d{4}|\d{1,2}\s?[A-Za-z]|-/g.test(s)&&/[-‚Äì‚Äî]/.test(s)&&s.split(/[-‚Äì‚Äî]/).length>=2)return s;const a=new Date(s);return isNaN(a.getTime())?s:a.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})};function S(s){const a=s.regularPricePerPerson,n=s.promoPricePerPerson,c=s.durationDays??s.itinerary?.length??0,G=s.basePricePerDay??0,D=Math.round(G*c);return{regular:a,promo:n,computed:D,effective:typeof a=="number"?a:typeof n=="number"?n:D}}function P(s,a=!1){return a?`PHP ${Math.round(s).toLocaleString("en-PH")}`:`PHP ${s.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`}const y=t?S(t):{regular:void 0,promo:void 0,effective:0},Y=typeof y.regular=="number"?y.regular:y.effective??0,q=T&&typeof y.promo=="number"?y.promo:Y,le=Math.max(1,v)*(q??0),U=h??t?.slug??"",k=t?.itinerary??[],M=t?.highlights??[],L=t?.additionalInfo,Z=L&&Array.isArray(L.countries)?L.countries.map(s=>s?.name).filter(s=>typeof s=="string"&&!!s):[],re=Z.length>0?Z:L?.countriesVisited??[],J=!!t&&!!t.travelWindow?.start&&!!t.travelWindow?.end,E=!!t&&Array.isArray(t.departureDates)&&(t.departureDates?.length??0)>0,W={france:"fr",switzerland:"ch",italy:"it","vatican city":"va",vatican:"va",austria:"at",germany:"de",spain:"es",portugal:"pt",netherlands:"nl","the netherlands":"nl",belgium:"be",denmark:"dk",sweden:"se",norway:"no",finland:"fi",ireland:"ie",croatia:"hr",greece:"gr",hungary:"hu",poland:"pl","czech republic":"cz",czechia:"cz",slovakia:"sk",slovenia:"si",romania:"ro",bulgaria:"bg",russia:"ru",turkey:"tr",philippines:"ph",china:"cn",japan:"jp","south korea":"kr",korea:"kr",india:"in",thailand:"th",vietnam:"vn",indonesia:"id",malaysia:"my",singapore:"sg",australia:"au","new zealand":"nz",nz:"nz",usa:"us","united states":"us","united states of america":"us",canada:"ca",mexico:"mx",brazil:"br",argentina:"ar","united kingdom":"gb",uk:"gb",england:"gb",scotland:"gb",wales:"gb","northern ireland":"gb"};function ne(s){if(!s)return;const a=s.trim().toLowerCase();if(W[a])return W[a];const n=a.split(/[,(]/)[0].trim();if(W[n])return W[n]}function ie(s){if(!s)return;const a=s.toUpperCase();if(a.length!==2)return;const n=127462+(a.charCodeAt(0)-65),c=127462+(a.charCodeAt(1)-65);return String.fromCodePoint(n,c)}const X=t?.fullStops??[];function Q(){!r||r.length===0||w(s=>{const a=r.length;return(s-1+a)%a})}function ee(){!r||r.length===0||w(s=>(s+1)%r.length)}function B(s=0){F(s),z(!0)}function te(s){I(a=>Math.max(1,Math.min(10,a+s)))}function se(){N("availability"),setTimeout(()=>{if(!o.current){const a=document.querySelector("[data-date]");a&&a.scrollIntoView({behavior:"smooth",inline:"center"});return}const s=t?.departureDates;if(s&&s.length>0){const a=s[0],n=typeof a=="string"?a:JSON.stringify(a);i(n),m(n);const c=o.current.querySelector(`[data-date="${n}"]`);c&&c.focus();return}o.current.scrollIntoView({behavior:"smooth",block:"center"})},150)}const oe={background:"linear-gradient(180deg, rgba(2,18,51,1) 0%, rgba(8,42,102,1) 35%, rgba(4,18,55,1) 100%)","--accent-yellow":"#FFD24D","--accent-yellow-600":"#FFC107","--muted-slate":"#94a3b8"};function ae({compact:s=!1}){const a=s?"p-3":"p-4",n=s?"text-sm px-2 py-1":"px-3 py-2";return e.jsxs("div",{className:`w-full ${a} bg-white card-glass border border-white/8 rounded-lg shadow-lg`,children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Launch Offer"}),e.jsxs("div",{className:"mt-2 flex items-baseline gap-3",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"var(--accent-yellow)"},children:P(Y??0)}),e.jsx("div",{className:"text-xs text-slate-500",children:"per person"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[typeof y.promo=="number"&&e.jsx("div",{className:"text-xs text-slate-900 bg-accent-yellow px-2 py-1 rounded",children:"Promo available"}),e.jsx("div",{className:"text-xs text-slate-400",children:"¬∑ Flexible payment"})]}),t&&t.bookingPdfUrl&&e.jsx("div",{className:"mt-3",children:e.jsx("a",{href:t.bookingPdfUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-block text-sm px-3 py-1 bg-white/90 rounded font-semibold",children:"Open Flipbook"})}),s?e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:se,className:`${n} bg-rose-600 text-white rounded`,children:"Available Dates"}),e.jsx($,{to:`/tour/builder/${encodeURIComponent(U)}`,className:`${n} border rounded bg-white hover:bg-slate-50`,children:"Customize"})]}),e.jsx($,{to:`/booking/${encodeURIComponent(U)}`,state:{tour:t,selectedDate:p,passengers:v,perPerson:q},className:"w-full text-center px-3 py-2 bg-accent-yellow text-slate-900 rounded font-semibold block",children:"BOOK NOW"})]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-3 flex gap-2",children:e.jsx("button",{onClick:se,className:`${n} bg-rose-600 text-white rounded`,children:"Available Dates"})})}),!s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"PASSENGERS"}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("button",{onClick:()=>te(-1),className:"px-2 py-1 bg-white/6 rounded",children:"‚àí"}),e.jsx("input",{type:"number",min:1,max:10,value:v,onChange:c=>I(Math.max(1,Math.min(10,Number(c.target.value)||1))),className:"w-16 text-black px-2 py-1 rounded border","aria-label":"Number of passengers"}),e.jsx("button",{onClick:()=>te(1),className:"px-2 py-1 bg-white/6 rounded",children:"+"}),e.jsx("div",{className:"ml-auto text-xs text-slate-400",children:"Max 10"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-slate-300",children:"PRICE"}),e.jsx("div",{className:"text-xs text-slate-400",children:"Preview options"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"text-lg font-semibold",style:{color:"var(--accent-yellow)"},children:[P(Y??0)," ",e.jsx("span",{className:"text-xs text-slate-300",children:"per person"})]}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:typeof y.promo=="number"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-200",children:[e.jsx("input",{type:"checkbox",checked:T,onChange:c=>_(c.target.checked)}),"Use promo for totals"]}),e.jsxs("div",{className:"text-xs text-slate-300",children:["Promo: ",e.jsx("span",{className:"font-semibold",children:P(typeof y.promo=="number"?y.promo:0)})]})]})}),v>1&&e.jsxs("div",{className:"text-sm font-bold mt-3 text-white",children:["Total: ",P(le)]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx($,{to:`/tour/builder/${encodeURIComponent(U)}`,className:"flex-1 text-center px-3 py-2 bg-accent-yellow text-slate-900 rounded font-semibold",children:"CUSTOMIZE"}),e.jsx($,{to:`/booking/${encodeURIComponent(U)}`,state:{tour:t,selectedDate:p,passengers:v,perPerson:q},className:"px-3 py-2 border rounded text-sm inline-flex items-center gap-2 bg-white text-slate-900 font-semibold shadow hover:shadow-md",children:"BOOK NOW"})]})]})]})}function K(s){return typeof s=="string"&&s.length>0}return e.jsxs("div",{className:"min-h-screen",style:oe,children:[e.jsx("style",{children:`
        .accent-yellow { color: var(--accent-yellow); }
        .bg-accent-yellow { background-color: var(--accent-yellow); }
        .ring-accent-yellow { box-shadow: 0 0 0 3px rgba(255,210,77,0.12); }
        .tab-underline { transition: transform .25s cubic-bezier(.2,.9,.2,1), opacity .25s; }
        .fade-enter { opacity: 0; transform: translateY(6px); }
        .fade-enter-active { opacity: 1; transform: translateY(0); transition: all .28s ease; }
        .card-glass { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); backdrop-filter: blur(6px); }
        .modal-backdrop { background: rgba(2,6,23,0.6); }
        .itinerary-day { transition: all .18s ease; }
        .itinerary-day:hover { transform: translateY(-4px); box-shadow: 0 8px 30px rgba(2,6,23,0.45); }

        /* Pill buttons */
        .date-pill {
          white-space: normal;
          user-select: none;
          border-radius: 10px;
          padding: 9px 14px;
          font-weight: 600;
          font-size: 13px;
          border: 1px solid rgba(255,255,255,0.08);
          color: #cbd5e1; /* slate-300 */
          background: rgba(255,255,255,0.03);
          box-shadow: none;
          text-align: center;
        }
        .date-pill:hover {
          transform: translateY(-1px);
          background: rgba(255,255,255,0.06);
        }
        .date-pill.selected {
          background: var(--accent-yellow);
          color: #06202a;
          border: 2px solid #1a1a1a;
          box-shadow: 0 4px 14px rgba(0,0,0,0.35), 0 0 0 3px rgba(0,0,0,0.06) inset;
        }

        /* Grid for dates: 1 column on very small screens, 2 columns on sm+ */
        .dates-grid {
          display: grid;
          grid-template-columns: 1fr;
          gap: 10px;
          max-height: 220px;
          overflow-y: auto;
        }
        @media (min-width: 640px) {
          .dates-grid {
            grid-template-columns: repeat(2, 1fr);
          }
        }
      `}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("nav",{className:"text-sm text-slate-200/80 mb-4 flex items-center gap-2",children:[e.jsx($,{to:"/",className:"hover:underline",children:"Home"}),e.jsx("span",{className:"text-slate-400",children:"/"}),e.jsx($,{to:"/tours",className:"hover:underline",children:"Tours"}),e.jsx("span",{className:"text-slate-400",children:"/"}),e.jsx("span",{className:"text-white font-medium",children:t?t.title:""})]}),e.jsxs("div",{className:"lg:hidden",children:[e.jsx("div",{className:"relative mb-4",children:e.jsx("div",{className:"rounded-lg overflow-hidden shadow-xl",children:e.jsxs("div",{className:"relative w-full h-48 bg-slate-800 rounded",children:[t&&t.images&&t.images.length>0&&K(t.images[u])?e.jsx("img",{src:t.images[u],alt:`${t.title} image ${u+1}`,className:"w-full h-full object-cover transition-transform duration-700 ease-out transform hover:scale-105",loading:"lazy",onClick:()=>B(u),style:{cursor:"zoom-in"}}):e.jsx("img",{src:"/assets/placeholder.jpg",alt:"placeholder",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/40"}),e.jsx("button",{"aria-label":"Previous image",onClick:Q,className:"absolute left-3 top-1/2 -translate-y-1/2 bg-white/10 hover:bg-white/20 text-white rounded-full p-1.5",children:"‚Äπ"}),e.jsx("button",{"aria-label":"Next image",onClick:ee,className:"absolute right-3 top-1/2 -translate-y-1/2 bg-white/10 hover:bg-white/20 text-white rounded-full p-1.5",children:"‚Ä∫"}),e.jsx("div",{className:"absolute left-4 bottom-4 text-left text-white z-10",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 bg-white/20 text-white px-2 py-1 rounded-full text-xs",children:[t?.durationDays??k.length," days"]}),t&&t.guaranteedDeparture&&e.jsx("span",{className:"inline-flex items-center gap-1 bg-emerald-500/20 text-emerald-200 px-2 py-1 rounded-full text-xs",children:"Guaranteed"})]})}),e.jsx("div",{className:"absolute right-3 bottom-3 flex gap-1 z-10",children:t&&t.images&&t.images.map((s,a)=>e.jsx("button",{onClick:()=>w(a),"aria-label":`Go to image ${a+1}`,className:`w-1.5 h-1.5 rounded-full ${a===u?"bg-accent-yellow":"bg-white/30"}`},a))})]})})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs uppercase tracking-wider text-slate-200/80",children:t?.line??"Line"}),e.jsx("h1",{className:"font-serif font-extrabold text-2xl text-white mt-1 leading-tight",children:t?.title}),e.jsx("p",{className:"text-slate-300 mt-2 text-sm",children:t?.summary}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("button",{onClick:()=>B(0),className:"px-3 py-1.5 bg-accent-yellow text-slate-900 rounded font-semibold text-sm",children:"View gallery"}),M.length>0&&e.jsxs("span",{className:"text-xs text-slate-300",children:["‚Ä¢ ",M.slice(0,2).join(", ")]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(ae,{compact:!0})})]}),e.jsxs("div",{className:"mb-6 hidden lg:grid grid-cols-3 gap-6 items-start relative",children:[e.jsx("div",{className:"lg:col-span-2 relative",children:e.jsx("div",{className:"rounded-lg overflow-hidden shadow-xl",children:e.jsxs("div",{className:"relative w-full h-80 md:h-[380px] bg-slate-800 rounded",children:[t&&t.images&&t.images.length>0&&K(t.images[u])?e.jsx("img",{src:t.images[u],alt:`${t.title} image ${u+1}`,className:"w-full h-full object-cover transition-transform duration-700 ease-out transform hover:scale-105",loading:"lazy",onClick:()=>B(u),style:{cursor:"zoom-in"}}):e.jsx("img",{src:"/assets/placeholder.jpg",alt:"placeholder",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/30"}),e.jsx("button",{"aria-label":"Previous image",onClick:Q,className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/10 hover:bg-white/20 text-white rounded-full p-2",children:"‚Äπ"}),e.jsx("button",{"aria-label":"Next image",onClick:ee,className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/10 hover:bg-white/20 text-white rounded-full p-2",children:"‚Ä∫"}),e.jsxs("div",{className:"absolute left-6 bottom-6 text-left text-white max-w-2xl z-10",children:[e.jsx("div",{className:"mt-0",children:e.jsx("p",{className:"text-slate-200/90 max-w-xl",children:t?String(t.shortDescription||t.summary||""):""})}),e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 bg-white/6 text-white px-3 py-1 rounded-full text-sm",children:["‚Ä¢ ",t?.durationDays??k.length," days"]}),t&&t.guaranteedDeparture&&e.jsx("span",{className:"inline-flex items-center gap-2 bg-emerald-50/6 text-emerald-200 px-3 py-1 rounded-full text-sm",children:"Guaranteed"}),e.jsx("button",{onClick:()=>B(0),className:"px-3 py-1.5 bg-accent-yellow text-slate-900 rounded font-semibold text-sm",children:"View gallery"})]})]}),e.jsx("div",{className:"absolute right-4 bottom-4 flex gap-2 z-10",children:t&&t.images&&t.images.map((s,a)=>e.jsx("button",{onClick:()=>w(a),"aria-label":`Go to image ${a+1}`,className:`w-2 h-2 rounded-full ${a===u?"bg-accent-yellow":"bg-white/30"}`},a))})]})})}),e.jsx("div",{className:"lg:col-span-1 items-start flex",children:e.jsx("div",{className:"w-full",children:e.jsx(ae,{})})})]}),e.jsx("div",{className:"mb-6 hidden lg:block",children:e.jsx("div",{className:"bg-transparent rounded-md",children:e.jsxs("div",{className:"lg:flex lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"lg:w-2/3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wider text-slate-200/80",children:t?t.line??"Line":"Line"}),e.jsx("h1",{className:"font-serif font-extrabold text-3xl md:text-4xl text-white mt-2 leading-tight",children:t?t.title:""}),e.jsx("p",{className:"text-slate-300 mt-3 max-w-3xl",children:t?t.summary:""}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[e.jsxs("span",{className:"inline-flex items-center gap-2 bg-white/6 text-white px-3 py-1 rounded-full text-sm",children:["‚Ä¢ ",t?t.durationDays??k.length:k.length," days"]}),t&&t.guaranteedDeparture&&e.jsx("span",{className:"inline-flex items-center gap-2 bg-emerald-50/6 text-emerald-200 px-3 py-1 rounded-full text-sm",children:"Guaranteed departure"}),M.length>0&&e.jsxs("span",{className:"text-sm text-slate-300",children:["‚Ä¢ ",M.join(", ")]})]})]}),e.jsx("div",{className:"mt-4 lg:mt-0 lg:w-1/3 lg:text-right"})]})})}),e.jsx("div",{className:"bg-white/6 card-glass rounded-t-lg border-b border-white/6 mb-6",children:e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"flex gap-4 overflow-x-auto",children:[e.jsx("button",{onClick:()=>N("itinerary"),className:`px-3 py-3 whitespace-nowrap -mb-px ${f==="itinerary"?"border-b-2 border-accent-yellow text-accent-yellow font-semibold":"text-slate-200"}`,children:"Itinerary"}),e.jsx("button",{onClick:()=>N("availability"),className:`px-3 py-3 whitespace-nowrap -mb-px ${f==="availability"?"border-b-2 border-accent-yellow text-accent-yellow font-semibold":"text-slate-200"}`,children:"Availability"}),e.jsx("button",{onClick:()=>N("extensions"),className:`px-3 py-3 whitespace-nowrap -mb-px ${f==="extensions"?"border-b-2 border-accent-yellow text-accent-yellow font-semibold":"text-slate-200"}`,children:"Extensions"}),e.jsx("button",{onClick:()=>N("details"),className:`px-3 py-3 whitespace-nowrap -mb-px ${f==="details"?"border-b-2 border-accent-yellow text-accent-yellow font-semibold":"text-slate-200"}`,children:"Details"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{children:[f==="itinerary"&&e.jsxs("div",{className:"bg-white/6 card-glass rounded-lg p-4 lg:p-6 border border-white/6",children:[e.jsx("h3",{className:"text-lg lg:text-xl font-semibold mb-4 text-white",children:"Day-by-day itinerary"}),e.jsxs("div",{className:"space-y-6",children:[k.map(s=>e.jsx("div",{className:"p-4 border rounded-lg bg-white/4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"text-sm text-slate-300",children:["Day ",s.day]}),e.jsx("div",{className:"text-lg font-semibold text-white",children:s.title}),e.jsx("p",{className:"text-slate-300 mt-2",children:s.description}),s.image&&e.jsx("div",{className:"mt-3",children:e.jsx("img",{src:s.image,alt:`Itinerary Day ${s.day}`,className:"w-full max-w-md h-40 object-cover rounded border"})})]})})},s.day)),k.length===0&&e.jsx("div",{className:"text-slate-300",children:"No itinerary available."})]})]}),f==="availability"&&e.jsxs("div",{className:"bg-white/6 card-glass rounded-lg p-6 border border-white/6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Availability"}),e.jsx("p",{className:"text-slate-300",children:J?e.jsxs(e.Fragment,{children:["This tour runs from ",e.jsx("strong",{className:"text-white",children:b(t.travelWindow.start)})," to ",e.jsx("strong",{className:"text-white",children:b(t.travelWindow.end)}),"."]}):E?e.jsx(e.Fragment,{children:"Multiple discrete departure dates are available. Choose one from the right."}):e.jsx(e.Fragment,{children:"Availability details are not available."})})]}),f==="extensions"&&e.jsxs("div",{className:"bg-white/6 card-glass rounded-lg p-6 border border-white/6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Extensions"}),e.jsx("p",{className:"text-slate-300",children:"Optional extensions (e.g., pre/post stays) are available on some departures."})]}),f==="details"&&e.jsxs("div",{className:"bg-white/6 card-glass rounded-lg p-6 border border-white/6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Tour details"}),e.jsx("p",{className:"text-slate-300",children:"Practical information, inclusion/exclusion, activity level and more."}),t&&t.bookingPdfUrl&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm text-white mb-2",children:"Flipbook"}),e.jsx("a",{href:t.bookingPdfUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-block px-3 py-2 bg-accent-yellow text-slate-900 rounded font-semibold",children:"Open Flipbook"})]})]})]})}),e.jsxs("aside",{className:"space-y-6",children:[E&&e.jsx("section",{ref:o,children:e.jsx(Ne,{departureDates:t.departureDates.map(s=>typeof s=="string"?{start:s,end:s}:s),selectedDate:p||void 0,onSelectDate:s=>i(s)})}),!E&&J&&e.jsxs("section",{className:"bg-white/6 card-glass rounded-lg p-5 border border-white/6 shadow-sm",children:[e.jsx("h4",{className:"text-sm text-slate-200 mb-3",children:"Travel Window"}),e.jsxs("div",{className:"text-sm text-slate-200",children:[e.jsxs("div",{className:"font-semibold text-white",children:[b(t.travelWindow.start)," ‚Äì ",b(t.travelWindow.end)]}),e.jsx("div",{className:"text-slate-400 text-xs mt-1",children:"Tour runs during this period"})]})]}),!E&&!J&&e.jsxs("section",{className:"bg-white/6 card-glass rounded-lg p-5 border border-white/6 shadow-sm",children:[e.jsx("h4",{className:"text-sm text-slate-200 mb-3",children:"Departure"}),e.jsx("div",{className:"text-sm text-slate-400",children:"No departure information available"})]}),e.jsxs("section",{className:"bg-white/6 card-glass rounded-lg p-5 border border-white/6 shadow-sm",children:[e.jsx("h4",{className:"text-sm text-slate-200 mb-2",children:"Tour overview"}),e.jsxs("div",{className:"text-sm text-slate-200",children:[e.jsx("p",{className:"mb-2",children:t?.summary}),e.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"Duration:"})," ",t?.durationDays??k.length," days"]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"Countries:"})," ",re.join(", ")||"‚Äî"]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"Highlights:"})," ",M.join(", ")||"‚Äî"]})]}),t&&t.additionalInfo&&Array.isArray(t.additionalInfo.countries)&&t.additionalInfo.countries.length>0&&e.jsxs("div",{className:"mt-3 flex gap-2",children:[t.additionalInfo.countries.slice(0,3).map((s,a)=>e.jsx("div",{className:"w-20 h-12 overflow-hidden rounded border bg-black/5",children:s.image&&K(s.image)?e.jsx("img",{src:s.image,alt:s.name??"Country",className:"w-full h-full object-cover"}):e.jsx("div",{className:"text-xs text-slate-300 p-2",children:s.name??"‚Äî"})},a)),t.additionalInfo.countries.length>3&&e.jsxs("div",{className:"text-xs text-slate-300 self-end",children:["+",t.additionalInfo.countries.length-3]})]})]})," "]})," "]})," "]})," "]})," ",R&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center modal-backdrop",children:e.jsx("div",{className:"max-w-4xl w-full mx-4 bg-transparent",children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>z(!1),className:"absolute right-2 top-2 z-50 bg-white/10 text-white rounded-full p-2",children:"‚úï"}),r.length>0&&e.jsx(ke,{src:r[V]}),e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2",children:e.jsx("button",{onClick:()=>{r.length>0&&F(s=>(s-1+r.length)%r.length)},className:"bg-white/10 text-white rounded-full p-2",children:"‚Äπ"})}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:e.jsx("button",{onClick:()=>{r.length>0&&F(s=>(s+1)%r.length)},className:"bg-white/10 text-white rounded-full p-2",children:"‚Ä∫"})})]})})}),H&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center modal-backdrop",children:e.jsxs("div",{className:"max-w-2xl w-full mx-4 bg-white/6 card-glass rounded-lg p-4 border border-white/8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Route preview"}),e.jsx("button",{onClick:()=>l(!1),className:"text-white/80",children:"Close"})]}),e.jsx("div",{className:"text-slate-200 text-sm",children:e.jsxs("ol",{className:"space-y-2",children:[X.length===0&&e.jsx("li",{children:"No stops to preview."}),X.map((s,a)=>{const n=ne(s.country),c=ie(n);return e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:c??"üè≥Ô∏è"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.city}),e.jsx("div",{className:"text-xs text-slate-300",children:s.country})]})]},a)})]})})]})})]})}export{ke as GalleryImageWithFallback,Ie as default};
