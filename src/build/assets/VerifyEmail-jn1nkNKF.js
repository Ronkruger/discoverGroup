import{o as g,a as l,u as h,p as u,j as e,L as n}from"./index-7zN7D-LI.js";const b="http://localhost:4000";function p(){const[o]=g(),[r,a]=l.useState("verifying"),[c,i]=l.useState(""),d=h(),{setUser:m}=u();return l.useEffect(()=>{(async()=>{const x=o.get("token");if(!x){a("error"),i("Invalid verification link. No token provided.");return}try{const t=await fetch(`${b}/auth/verify-email?token=${x}`),s=await t.json();if(!t.ok)throw new Error(s.error||"Verification failed");s.token&&(localStorage.setItem("token",s.token),localStorage.setItem("user",JSON.stringify(s.user)),m(s.user)),a("success"),i(s.message||"Email verified successfully!"),setTimeout(()=>{d("/")},3e3)}catch(t){a("error"),i(t instanceof Error?t.message:"Failed to verify email")}})()},[o,d,m]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-md",children:e.jsxs("div",{className:"text-center",children:[r==="verifying"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verifying Your Email"}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we verify your email address..."})]}),r==="success"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-green-600 text-6xl mb-4",children:"✓"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Email Verified!"}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:e.jsx("p",{className:"text-gray-700",children:c})}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Redirecting you to the homepage in 3 seconds..."}),e.jsx(n,{to:"/",className:"inline-block bg-blue-600 text-white px-6 py-2 rounded font-semibold hover:bg-blue-700",children:"Go to Homepage Now"})]}),r==="error"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-red-600 text-6xl mb-4",children:"✗"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verification Failed"}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsx("p",{className:"text-red-700",children:c})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"The verification link may have expired or is invalid."}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(n,{to:"/login",className:"inline-block bg-blue-600 text-white px-6 py-2 rounded font-semibold hover:bg-blue-700",children:"Go to Login"}),e.jsx(n,{to:"/register",className:"inline-block bg-gray-600 text-white px-6 py-2 rounded font-semibold hover:bg-gray-700",children:"Register Again"})]})]})]})]})})})}export{p as default};
